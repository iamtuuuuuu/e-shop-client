{"remainingRequest":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/thread-loader/dist/cjs.js!/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/babel-loader/lib/index.js!/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/src/composables/useUsersDetails.js","dependencies":[{"path":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/src/composables/useUsersDetails.js","mtime":1621152090012},{"path":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3Z1YW5odHUvRGVza3RvcC93b3Jrc3BhY2Uvbm9kZWpzL01FVk4vcHJvc2hvcC9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgY29tcHV0ZWQsIHJlZiB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZVVzZXJzRGV0YWlscygpIHsKICB2YXIgc3RvcmUgPSB1c2VTdG9yZSgpOwogIHZhciBzdWNjZXNzID0gcmVmKGZhbHNlKTsKICB2YXIgdXNlcnMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gc3RvcmUuZ2V0dGVyc1snZ2V0QWxsVXNlcnMnXTsKICB9KTsKICB2YXIgdXNlckRldGFpbHMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gc3RvcmUuZ2V0dGVyc1snZ2V0VXNlckRldGFpbHMnXTsKICB9KTsKCiAgdmFyIGZldGNoQWxsVXNlcnMgPSBmdW5jdGlvbiBmZXRjaEFsbFVzZXJzKCkgewogICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdmZXRjaEFsbFVzZXJzJyk7CiAgfTsKCiAgdmFyIGZldGNoVXNlckRldGFpbHMgPSBmdW5jdGlvbiBmZXRjaFVzZXJEZXRhaWxzKCkgewogICAgdmFyIHVzZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICdwcm9maWxlJzsKICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnZmV0Y2hVc2VyRGV0YWlscycsIHVzZXIpOwogIH07CgogIHZhciB1cGRhdGVVc2VyUHJvZmlsZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh1c2VyKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoISh1c2VyLnBhc3N3b3JkICE9PSB1c2VyLmNvbmZpcm1QYXNzd29yZCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBzdG9yZS5jb21taXQoJ3V0aWxzL3NldEVycm9yJywgewogICAgICAgICAgICAgICAgbWVzc2FnZTogJ1RoZSBwYXNzd29yZCBjb25maXJtYXRpb24gbXVzdCBtYXRjaCcKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCd1cGRhdGVVc2VyRGV0YWlscycsIHsKICAgICAgICAgICAgICAgIHVzZXI6IHVzZXIKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBzdWNjZXNzLnZhbHVlID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVVzZXJQcm9maWxlKF94KSB7CiAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIHVwZGF0ZVVzZXJEZXRhaWxzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIodXNlcikgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3VwZGF0ZVVzZXJEZXRhaWxzJywgewogICAgICAgICAgICAgICAgdXNlcjogdXNlciwKICAgICAgICAgICAgICAgIHJvdXRlOiB1c2VyLl9pZAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBzdWNjZXNzLnZhbHVlID0gX2NvbnRleHQyLnNlbnQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiB1cGRhdGVVc2VyRGV0YWlscyhfeDIpIHsKICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIGRlbGV0ZVVzZXIgPSBmdW5jdGlvbiBkZWxldGVVc2VyKHVzZXJJZCkgewogICAgaWYgKHdpbmRvdy5jb25maXJtKCJEbyB5b3UgcmVhbGx5IHdhbnQgdG8gcmVtb3ZlIHRoZSB1c2VyICIuY29uY2F0KHVzZXJJZCwgIj8iKSkpIHN0b3JlLmRpc3BhdGNoKCdkZWxldGVVc2VyJywgdXNlcklkKTsKICB9OwoKICByZXR1cm4gewogICAgc3VjY2Vzczogc3VjY2VzcywKICAgIHVzZXJzOiB1c2VycywKICAgIHVzZXJEZXRhaWxzOiB1c2VyRGV0YWlscywKICAgIGZldGNoQWxsVXNlcnM6IGZldGNoQWxsVXNlcnMsCiAgICBmZXRjaFVzZXJEZXRhaWxzOiBmZXRjaFVzZXJEZXRhaWxzLAogICAgdXBkYXRlVXNlclByb2ZpbGU6IHVwZGF0ZVVzZXJQcm9maWxlLAogICAgdXBkYXRlVXNlckRldGFpbHM6IHVwZGF0ZVVzZXJEZXRhaWxzLAogICAgZGVsZXRlVXNlcjogZGVsZXRlVXNlciwKICAgIGlzTG9hZGluZzogY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuZ2V0dGVyc1sndXRpbHMvaXNMb2FkaW5nJ107CiAgICB9KSwKICAgIGVycm9yOiBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzWyd1dGlscy9nZXRFcnJvciddOwogICAgfSkKICB9Owp9"},{"version":3,"sources":["/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/src/composables/useUsersDetails.js"],"names":["computed","ref","useStore","useUsersDetails","store","success","users","getters","userDetails","fetchAllUsers","dispatch","fetchUserDetails","user","updateUserProfile","password","confirmPassword","commit","message","root","value","updateUserDetails","route","_id","deleteUser","userId","window","confirm","isLoading","error"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,GAAnB,QAA8B,KAA9B;AACA,SAASC,QAAT,QAAyB,MAAzB;AAEA,eAAe,SAASC,eAAT,GAA2B;AACtC,MAAMC,KAAK,GAAGF,QAAQ,EAAtB;AAEA,MAAMG,OAAO,GAAGJ,GAAG,CAAC,KAAD,CAAnB;AACA,MAAMK,KAAK,GAAGN,QAAQ,CAAC;AAAA,WAAMI,KAAK,CAACG,OAAN,CAAc,aAAd,CAAN;AAAA,GAAD,CAAtB;AACA,MAAMC,WAAW,GAAGR,QAAQ,CAAC;AAAA,WAAMI,KAAK,CAACG,OAAN,CAAc,gBAAd,CAAN;AAAA,GAAD,CAA5B;;AAEA,MAAME,aAAa,GAAG,SAAhBA,aAAgB;AAAA,WAAML,KAAK,CAACM,QAAN,CAAe,eAAf,CAAN;AAAA,GAAtB;;AACA,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB;AAAA,QAACC,IAAD,uEAAQ,SAAR;AAAA,WAAsBR,KAAK,CAACM,QAAN,CAAe,kBAAf,EAAmCE,IAAnC,CAAtB;AAAA,GAAzB;;AAEA,MAAMC,iBAAiB;AAAA,uEAAG,iBAAMD,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA,oBACtBA,IAAI,CAACE,QAAL,KAAkBF,IAAI,CAACG,eADD;AAAA;AAAA;AAAA;;AAEhBX,cAAAA,KAAK,CAACY,MAAN,CAAa,gBAAb,EAA+B;AAAEC,gBAAAA,OAAO,EAAE;AAAX,eAA/B,EAAoF;AAAEC,gBAAAA,IAAI,EAAE;AAAR,eAApF,CAFgB;AAAA;AAAA;;AAAA;AAAA;AAAA,qBAGMd,KAAK,CAACM,QAAN,CAAe,mBAAf,EAAoC;AAAEE,gBAAAA,IAAI,EAAJA;AAAF,eAApC,CAHN;;AAAA;AAGhBP,cAAAA,OAAO,CAACc,KAHQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAjBN,iBAAiB;AAAA;AAAA;AAAA,KAAvB;;AAKA,MAAMO,iBAAiB;AAAA,wEAAG,kBAAMR,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAoCR,KAAK,CAACM,QAAN,CAAe,mBAAf,EAAoC;AAAEE,gBAAAA,IAAI,EAAJA,IAAF;AAAQS,gBAAAA,KAAK,EAAET,IAAI,CAACU;AAApB,eAApC,CAApC;;AAAA;AAAA,gDAAcjB,OAAO,CAACc,KAAtB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAjBC,iBAAiB;AAAA;AAAA;AAAA,KAAvB;;AAEA,MAAMG,UAAU,GAAG,SAAbA,UAAa,CAAAC,MAAM,EAAI;AACzB,QAAIC,MAAM,CAACC,OAAP,iDAAwDF,MAAxD,OAAJ,EAAwEpB,KAAK,CAACM,QAAN,CAAe,YAAf,EAA6Bc,MAA7B;AAC3E,GAFD;;AAIA,SAAO;AACHnB,IAAAA,OAAO,EAAPA,OADG;AAEHC,IAAAA,KAAK,EAALA,KAFG;AAGHE,IAAAA,WAAW,EAAXA,WAHG;AAKHC,IAAAA,aAAa,EAAbA,aALG;AAMHE,IAAAA,gBAAgB,EAAhBA,gBANG;AAOHE,IAAAA,iBAAiB,EAAjBA,iBAPG;AAQHO,IAAAA,iBAAiB,EAAjBA,iBARG;AASHG,IAAAA,UAAU,EAAVA,UATG;AAWHI,IAAAA,SAAS,EAAE3B,QAAQ,CAAC;AAAA,aAAMI,KAAK,CAACG,OAAN,CAAc,iBAAd,CAAN;AAAA,KAAD,CAXhB;AAYHqB,IAAAA,KAAK,EAAE5B,QAAQ,CAAC;AAAA,aAAMI,KAAK,CAACG,OAAN,CAAc,gBAAd,CAAN;AAAA,KAAD;AAZZ,GAAP;AAcH","sourcesContent":["import { computed, ref } from 'vue'\nimport { useStore } from 'vuex'\n\nexport default function useUsersDetails() {\n    const store = useStore()\n\n    const success = ref(false)\n    const users = computed(() => store.getters['getAllUsers'])\n    const userDetails = computed(() => store.getters['getUserDetails'])\n\n    const fetchAllUsers = () => store.dispatch('fetchAllUsers')\n    const fetchUserDetails = (user = 'profile') => store.dispatch('fetchUserDetails', user)\n\n    const updateUserProfile = async user => {\n        user.password !== user.confirmPassword\n            ? store.commit('utils/setError', { message: 'The password confirmation must match' }, { root: true })\n            : success.value = await store.dispatch('updateUserDetails', { user })\n    }\n    const updateUserDetails = async user => success.value = await store.dispatch('updateUserDetails', { user, route: user._id })\n\n    const deleteUser = userId => {\n        if (window.confirm(`Do you really want to remove the user ${userId}?`)) store.dispatch('deleteUser', userId)\n    }\n\n    return {\n        success,\n        users,\n        userDetails,\n        \n        fetchAllUsers,\n        fetchUserDetails,\n        updateUserProfile,\n        updateUserDetails,\n        deleteUser,\n        \n        isLoading: computed(() => store.getters['utils/isLoading']),\n        error: computed(() => store.getters['utils/getError'])\n    }\n}"]}]}