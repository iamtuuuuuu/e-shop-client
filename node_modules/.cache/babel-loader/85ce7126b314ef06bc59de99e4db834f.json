{"remainingRequest":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/babel-loader/lib/index.js!/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/views/Admin/UserDetails.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/views/Admin/UserDetails.vue","mtime":1623344272096},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3Z1YW5odHUvRGVza3RvcC93b3Jrc3BhY2UvdnVlL2VzaG9wL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCB7IGRlZmluZUFzeW5jQ29tcG9uZW50LCByZWYgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VSb3V0ZSB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgVkZvcm1JbnB1dCBmcm9tICdAL2NvbXBvbmVudHMvVkZvcm1JbnB1dCc7CmltcG9ydCB1c2VVc2Vyc0RldGFpbHMgZnJvbSAnQC9jb21wb3NhYmxlcy91c2VVc2Vyc0RldGFpbHMnOwppbXBvcnQgdXNlT3JkZXJzIGZyb20gJ0AvY29tcG9zYWJsZXMvdXNlT3JkZXJzJzsKaW1wb3J0IGRheWpzIGZyb20gJ2RheWpzJzsKaW1wb3J0IGxvY2FsaXplZEZvcm1hdCBmcm9tICdkYXlqcy9wbHVnaW4vbG9jYWxpemVkRm9ybWF0JzsKZGF5anMuZXh0ZW5kKGxvY2FsaXplZEZvcm1hdCk7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVXNlciBEZXRhaWxzJywKICBjb21wb25lbnRzOiB7CiAgICBWRm9ybUlucHV0OiBWRm9ybUlucHV0LAogICAgVkxvYWRlcjogZGVmaW5lQXN5bmNDb21wb25lbnQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gaW1wb3J0KAogICAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiAibG9hZGVyLWNvbXBvbmVudCIgKi8KICAgICAgJ0AvY29tcG9uZW50cy91dGlscy9WTG9hZGVyJyk7CiAgICB9KSwKICAgIFZBbGVydDogZGVmaW5lQXN5bmNDb21wb25lbnQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gaW1wb3J0KAogICAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiAibWVzc2FnZS1jb21wb25lbnQiICovCiAgICAgICdAL2NvbXBvbmVudHMvdXRpbHMvVkFsZXJ0Jyk7CiAgICB9KQogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIHJvdXRlID0gdXNlUm91dGUoKTsKICAgIHZhciB1c2VySURQYXJhbSA9IHJvdXRlLnBhcmFtcy5pZDsKICAgIHZhciB1c2VyID0gcmVmKCk7CgogICAgdmFyIF91c2VVc2Vyc0RldGFpbHMgPSB1c2VVc2Vyc0RldGFpbHMoKSwKICAgICAgICBzdWNjZXNzID0gX3VzZVVzZXJzRGV0YWlscy5zdWNjZXNzLAogICAgICAgIGdldFVzZXJEZXRhaWxzQnlJZCA9IF91c2VVc2Vyc0RldGFpbHMuZ2V0VXNlckRldGFpbHNCeUlkLAogICAgICAgIHVwZGF0ZVVzZXJEZXRhaWxzID0gX3VzZVVzZXJzRGV0YWlscy51cGRhdGVVc2VyRGV0YWlscywKICAgICAgICBpc0xvYWRpbmcgPSBfdXNlVXNlcnNEZXRhaWxzLmlzTG9hZGluZywKICAgICAgICBlcnJvciA9IF91c2VVc2Vyc0RldGFpbHMuZXJyb3I7CgogICAgdmFyIF91c2VPcmRlcnMgPSB1c2VPcmRlcnMoKSwKICAgICAgICBvcmRlcnMgPSBfdXNlT3JkZXJzLm9yZGVycywKICAgICAgICBmZXRjaFVzZXJPcmRlcnMgPSBfdXNlT3JkZXJzLmZldGNoVXNlck9yZGVyczsKCiAgICBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciByZXM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gZ2V0VXNlckRldGFpbHNCeUlkKHVzZXJJRFBhcmFtKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIHVzZXIudmFsdWUgPSByZXM7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CgogICAgZmV0Y2hVc2VyT3JkZXJzKHVzZXJJRFBhcmFtKTsKICAgIGNvbnNvbGUubG9nKCd1c2VyJyk7CiAgICBjb25zb2xlLmxvZyh1c2VyKTsKICAgIHJldHVybiB7CiAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3MsCiAgICAgIHVzZXI6IHVzZXIsCiAgICAgIG9yZGVyczogb3JkZXJzLAogICAgICB1cGRhdGVVc2VyRGV0YWlsczogdXBkYXRlVXNlckRldGFpbHMsCiAgICAgIGRheWpzOiBkYXlqcywKICAgICAgaXNMb2FkaW5nOiBpc0xvYWRpbmcsCiAgICAgIGVycm9yOiBlcnJvcgogICAgfTsKICB9Cn07"},{"version":3,"sources":["/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/views/Admin/UserDetails.vue"],"names":[],"mappings":";;;;;AAkGA,SAAS,oBAAT,EAA+B,GAA/B,QAA0C,KAA1C;AACA,SAAS,QAAT,QAAyB,YAAzB;AACA,OAAO,UAAP,MAAuB,yBAAvB;AAEA,OAAO,eAAP,MAA4B,+BAA5B;AACA,OAAO,SAAP,MAAsB,yBAAtB;AAEA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,eAAP,MAA4B,8BAA5B;AACA,KAAK,CAAC,MAAN,CAAa,eAAb;AAEA,eAAe;AACX,EAAA,IAAI,EAAE,cADK;AAEX,EAAA,UAAU,EAAE;AACR,IAAA,UAAU,EAAV,UADQ;AAER,IAAA,OAAO,EAAE,oBAAoB,CAAC;AAAA,aAAM;AAAO;AAA2C,kCAAlD,CAAN;AAAA,KAAD,CAFrB;AAGR,IAAA,MAAM,EAAE,oBAAoB,CAAC;AAAA,aAAM;AAAO;AAA4C,iCAAnD,CAAN;AAAA,KAAD;AAHpB,GAFD;AAOX,EAAA,KAPW,mBAOH;AACJ,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,WAAU,GAAI,KAAK,CAAC,MAAN,CAAa,EAAjC;AACA,QAAM,IAAG,GAAI,GAAG,EAAhB;;AAHI,2BAIyE,eAAe,EAJxF;AAAA,QAII,OAJJ,oBAII,OAJJ;AAAA,QAIa,kBAJb,oBAIa,kBAJb;AAAA,QAIiC,iBAJjC,oBAIiC,iBAJjC;AAAA,QAIoD,SAJpD,oBAIoD,SAJpD;AAAA,QAI+D,KAJ/D,oBAI+D,KAJ/D;;AAAA,qBAKgC,SAAS,EALzC;AAAA,QAKI,MALJ,cAKI,MALJ;AAAA,QAKY,eALZ,cAKY,eALZ;;AAQJ,4DAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACqB,kBAAkB,CAAC,WAAD,CADvC;;AAAA;AACS,cAAA,GADT;AAEG,cAAA,IAAI,CAAC,KAAL,GAAa,GAAb;;AAFH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAKA,IAAA,eAAe,CAAC,WAAD,CAAf;AACA,IAAA,OAAO,CAAC,GAAR,CAAY,MAAZ;AACA,IAAA,OAAO,CAAC,GAAR,CAAY,IAAZ;AACA,WAAO;AACH,MAAA,OAAO,EAAP,OADG;AAEH,MAAA,IAAI,EAAJ,IAFG;AAGH,MAAA,MAAM,EAAN,MAHG;AAIH,MAAA,iBAAiB,EAAjB,iBAJG;AAKH,MAAA,KAAK,EAAL,KALG;AAMH,MAAA,SAAS,EAAT,SANG;AAOH,MAAA,KAAI,EAAJ;AAPG,KAAP;AASJ;AAhCW,CAAf","sourcesContent":["<template>\n<div id=\"user-details\" class=\"container-lg container-fluid\">\n    <h2 class=\"mb-4\">\n        <router-link :to=\"{ name: 'admin.users.index' }\" class=\"text-secondary\">\n            Users\n        </router-link>\n        <span class=\"text-muted\">/</span>\n        {{ user.name }}\n    </h2>\n\n    <v-loader v-if=\"isLoading\" />\n    <v-alert v-else-if=\"error.message\">\n        {{ error.message }}\n    </v-alert>\n\n    <div class=\"row\">\n        <div class=\"col-lg-3\">\n            <h3 class=\"mb-3\">Details</h3>\n\n            <v-alert v-if=\"success\" type=\"alert-success\">\n                Profile updated\n            </v-alert>\n\n            <form @submit.prevent=\"updateUserDetails(user)\">\n                <v-form-input\n                    v-model=\"user.name\"\n                    inputId=\"name\"\n                    label=\"Name\"\n                    :errors=\"error.errors ? error.errors.name : undefined\"\n                />\n                <v-form-input\n                    v-model=\"user.email\"\n                    inputId=\"email\"\n                    label=\"Email Address\"\n                    class=\"mb-2\"\n                    :errors=\"error.errors ? error.errors.email : undefined\"\n                />\n\n                <div class=\"form-check mb-3\">\n                    <input id=\"isAdmin\" type=\"checkbox\" class=\"form-check-input\" v-model=\"user.isAdmin\">\n                    <label for=\"isAdmin\" class=\"form-check-label\">Is Admin</label>\n                </div>\n                \n                <button type=\"submit\" class=\"btn btn-dark btn-block\">\n                    Update\n                </button>\n            </form>\n        </div>\n        <div class=\"col-lg-9 mt-lg-0 mt-4\">\n            <h3 class=\"mb-3\">Orders <sup>{{ orders.length }}</sup></h3>\n\n            <v-alert type=\"alert-info\" v-if=\"!isLoading && orders.length === 0\">\n                {{ user.name }} don't have any order yet.\n            </v-alert>\n            \n            <div class=\"table-responsive\" v-else>\n                <table class=\"table table-hover table-sm\">\n                    <thead>\n                        <tr>\n                            <th>Id</th>\n                            <th class=\"min-width\">Date</th>\n                            <th>Total</th>\n                            <th>Status</th>\n                            <th></th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr v-for=\"order in orders\" :key=\"order._id\">\n                            <td>{{ order._id }}</td>\n                            <td>{{ dayjs(order.createdAt).format('lll') }}</td>\n                            <td>\n                                {{\n                                    new Intl.NumberFormat('en-US', {\n                                        style: 'currency',\n                                        currency: 'USD'\n                                    }).format(order.totalPrice)\n                                }}\n                            </td>\n                            <td> {{ order.status }}</td>\n                            \n                            <td>\n                                <router-link\n                                    :to=\"{ name: 'orders.show', params: { id: order._id }}\"\n                                    class=\"btn btn-link btn-sm\"\n                                >\n                                    <font-awesome-icon :icon=\"['fas', 'info-circle']\" />\n                                </router-link>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n</template>\n\n<script>\nimport { defineAsyncComponent, ref } from 'vue'\nimport { useRoute } from 'vue-router'\nimport VFormInput from '@/components/VFormInput'\n\nimport useUsersDetails from '@/composables/useUsersDetails'\nimport useOrders from '@/composables/useOrders'\n\nimport dayjs from 'dayjs'\nimport localizedFormat from 'dayjs/plugin/localizedFormat'\ndayjs.extend(localizedFormat)\n\nexport default {\n    name: 'User Details',\n    components: {\n        VFormInput,\n        VLoader: defineAsyncComponent(() => import(/* webpackChunkName: \"loader-component\" */ '@/components/utils/VLoader')),\n        VAlert: defineAsyncComponent(() => import(/* webpackChunkName: \"message-component\" */ '@/components/utils/VAlert'))\n    },\n    setup() {\n        const route = useRoute()\n        const userIDParam = route.params.id\n        const user = ref();\n        const { success, getUserDetailsById, updateUserDetails, isLoading, error } = useUsersDetails()\n        const { orders, fetchUserOrders } = useOrders();\n        \n            \n        (async () => {\n            const res = await getUserDetailsById(userIDParam)     \n            user.value = res    \n        })()\n\n        fetchUserOrders(userIDParam)\n        console.log('user')\n        console.log(user)\n        return {\n            success,\n            user,\n            orders,\n            updateUserDetails,\n            dayjs,\n            isLoading,\n            error\n        }\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.row > div {\n    h3 sup {\n        font-size: 45%;\n        vertical-align: top;\n        top: .3em;\n        font-weight: 900;\n    }\n}\n\ntable {\n    thead tr th,\n    tbody tr td {\n        text-align: center;\n        vertical-align: middle;\n\n        svg {\n            &.fa-times { color: var(--danger) }\n        }\n    }\n}\n\n@media (max-width: 991px) {\n    table thead tr th.min-width {\n        min-width: 11.5rem\n    }\n}\n\n@media (max-width: 767px) {\n    #user-details {\n        > .row {\n            margin: 0;\n        \n            > div { padding: 0; }\n        }\n    }\n}\n</style>"],"sourceRoot":""}]}