{"remainingRequest":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/thread-loader/dist/cjs.js!/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/babel-loader/lib/index.js!/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/composables/useUsersDetails.js","dependencies":[{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/composables/useUsersDetails.js","mtime":1621152090012},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3Z1YW5odHUvRGVza3RvcC93b3Jrc3BhY2UvdnVlL2VzaG9wL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBjb21wdXRlZCwgcmVmIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlVXNlcnNEZXRhaWxzKCkgewogIHZhciBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgdmFyIHN1Y2Nlc3MgPSByZWYoZmFsc2UpOwogIHZhciB1c2VycyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzWydnZXRBbGxVc2VycyddOwogIH0pOwogIHZhciB1c2VyRGV0YWlscyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzWydnZXRVc2VyRGV0YWlscyddOwogIH0pOwoKICB2YXIgZmV0Y2hBbGxVc2VycyA9IGZ1bmN0aW9uIGZldGNoQWxsVXNlcnMoKSB7CiAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ2ZldGNoQWxsVXNlcnMnKTsKICB9OwoKICB2YXIgZmV0Y2hVc2VyRGV0YWlscyA9IGZ1bmN0aW9uIGZldGNoVXNlckRldGFpbHMoKSB7CiAgICB2YXIgdXNlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJ3Byb2ZpbGUnOwogICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdmZXRjaFVzZXJEZXRhaWxzJywgdXNlcik7CiAgfTsKCiAgdmFyIHVwZGF0ZVVzZXJQcm9maWxlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHVzZXIpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghKHVzZXIucGFzc3dvcmQgIT09IHVzZXIuY29uZmlybVBhc3N3b3JkKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgndXRpbHMvc2V0RXJyb3InLCB7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVGhlIHBhc3N3b3JkIGNvbmZpcm1hdGlvbiBtdXN0IG1hdGNoJwogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3VwZGF0ZVVzZXJEZXRhaWxzJywgewogICAgICAgICAgICAgICAgdXNlcjogdXNlcgogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHN1Y2Nlc3MudmFsdWUgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlVXNlclByb2ZpbGUoX3gpIHsKICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOwoKICB2YXIgdXBkYXRlVXNlckRldGFpbHMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMih1c2VyKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgndXBkYXRlVXNlckRldGFpbHMnLCB7CiAgICAgICAgICAgICAgICB1c2VyOiB1c2VyLAogICAgICAgICAgICAgICAgcm91dGU6IHVzZXIuX2lkCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHN1Y2Nlc3MudmFsdWUgPSBfY29udGV4dDIuc2VudCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVVzZXJEZXRhaWxzKF94MikgewogICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOwoKICB2YXIgZGVsZXRlVXNlciA9IGZ1bmN0aW9uIGRlbGV0ZVVzZXIodXNlcklkKSB7CiAgICBpZiAod2luZG93LmNvbmZpcm0oIkRvIHlvdSByZWFsbHkgd2FudCB0byByZW1vdmUgdGhlIHVzZXIgIi5jb25jYXQodXNlcklkLCAiPyIpKSkgc3RvcmUuZGlzcGF0Y2goJ2RlbGV0ZVVzZXInLCB1c2VySWQpOwogIH07CgogIHJldHVybiB7CiAgICBzdWNjZXNzOiBzdWNjZXNzLAogICAgdXNlcnM6IHVzZXJzLAogICAgdXNlckRldGFpbHM6IHVzZXJEZXRhaWxzLAogICAgZmV0Y2hBbGxVc2VyczogZmV0Y2hBbGxVc2VycywKICAgIGZldGNoVXNlckRldGFpbHM6IGZldGNoVXNlckRldGFpbHMsCiAgICB1cGRhdGVVc2VyUHJvZmlsZTogdXBkYXRlVXNlclByb2ZpbGUsCiAgICB1cGRhdGVVc2VyRGV0YWlsczogdXBkYXRlVXNlckRldGFpbHMsCiAgICBkZWxldGVVc2VyOiBkZWxldGVVc2VyLAogICAgaXNMb2FkaW5nOiBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzWyd1dGlscy9pc0xvYWRpbmcnXTsKICAgIH0pLAogICAgZXJyb3I6IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLmdldHRlcnNbJ3V0aWxzL2dldEVycm9yJ107CiAgICB9KQogIH07Cn0="},{"version":3,"sources":["/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/composables/useUsersDetails.js"],"names":["computed","ref","useStore","useUsersDetails","store","success","users","getters","userDetails","fetchAllUsers","dispatch","fetchUserDetails","user","updateUserProfile","password","confirmPassword","commit","message","root","value","updateUserDetails","route","_id","deleteUser","userId","window","confirm","isLoading","error"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,GAAnB,QAA8B,KAA9B;AACA,SAASC,QAAT,QAAyB,MAAzB;AAEA,eAAe,SAASC,eAAT,GAA2B;AACtC,MAAMC,KAAK,GAAGF,QAAQ,EAAtB;AAEA,MAAMG,OAAO,GAAGJ,GAAG,CAAC,KAAD,CAAnB;AACA,MAAMK,KAAK,GAAGN,QAAQ,CAAC;AAAA,WAAMI,KAAK,CAACG,OAAN,CAAc,aAAd,CAAN;AAAA,GAAD,CAAtB;AACA,MAAMC,WAAW,GAAGR,QAAQ,CAAC;AAAA,WAAMI,KAAK,CAACG,OAAN,CAAc,gBAAd,CAAN;AAAA,GAAD,CAA5B;;AAEA,MAAME,aAAa,GAAG,SAAhBA,aAAgB;AAAA,WAAML,KAAK,CAACM,QAAN,CAAe,eAAf,CAAN;AAAA,GAAtB;;AACA,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB;AAAA,QAACC,IAAD,uEAAQ,SAAR;AAAA,WAAsBR,KAAK,CAACM,QAAN,CAAe,kBAAf,EAAmCE,IAAnC,CAAtB;AAAA,GAAzB;;AAEA,MAAMC,iBAAiB;AAAA,uEAAG,iBAAMD,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA,oBACtBA,IAAI,CAACE,QAAL,KAAkBF,IAAI,CAACG,eADD;AAAA;AAAA;AAAA;;AAEhBX,cAAAA,KAAK,CAACY,MAAN,CAAa,gBAAb,EAA+B;AAAEC,gBAAAA,OAAO,EAAE;AAAX,eAA/B,EAAoF;AAAEC,gBAAAA,IAAI,EAAE;AAAR,eAApF,CAFgB;AAAA;AAAA;;AAAA;AAAA;AAAA,qBAGMd,KAAK,CAACM,QAAN,CAAe,mBAAf,EAAoC;AAAEE,gBAAAA,IAAI,EAAJA;AAAF,eAApC,CAHN;;AAAA;AAGhBP,cAAAA,OAAO,CAACc,KAHQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAjBN,iBAAiB;AAAA;AAAA;AAAA,KAAvB;;AAKA,MAAMO,iBAAiB;AAAA,wEAAG,kBAAMR,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAoCR,KAAK,CAACM,QAAN,CAAe,mBAAf,EAAoC;AAAEE,gBAAAA,IAAI,EAAJA,IAAF;AAAQS,gBAAAA,KAAK,EAAET,IAAI,CAACU;AAApB,eAApC,CAApC;;AAAA;AAAA,gDAAcjB,OAAO,CAACc,KAAtB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAjBC,iBAAiB;AAAA;AAAA;AAAA,KAAvB;;AAEA,MAAMG,UAAU,GAAG,SAAbA,UAAa,CAAAC,MAAM,EAAI;AACzB,QAAIC,MAAM,CAACC,OAAP,iDAAwDF,MAAxD,OAAJ,EAAwEpB,KAAK,CAACM,QAAN,CAAe,YAAf,EAA6Bc,MAA7B;AAC3E,GAFD;;AAIA,SAAO;AACHnB,IAAAA,OAAO,EAAPA,OADG;AAEHC,IAAAA,KAAK,EAALA,KAFG;AAGHE,IAAAA,WAAW,EAAXA,WAHG;AAKHC,IAAAA,aAAa,EAAbA,aALG;AAMHE,IAAAA,gBAAgB,EAAhBA,gBANG;AAOHE,IAAAA,iBAAiB,EAAjBA,iBAPG;AAQHO,IAAAA,iBAAiB,EAAjBA,iBARG;AASHG,IAAAA,UAAU,EAAVA,UATG;AAWHI,IAAAA,SAAS,EAAE3B,QAAQ,CAAC;AAAA,aAAMI,KAAK,CAACG,OAAN,CAAc,iBAAd,CAAN;AAAA,KAAD,CAXhB;AAYHqB,IAAAA,KAAK,EAAE5B,QAAQ,CAAC;AAAA,aAAMI,KAAK,CAACG,OAAN,CAAc,gBAAd,CAAN;AAAA,KAAD;AAZZ,GAAP;AAcH","sourcesContent":["import { computed, ref } from 'vue'\nimport { useStore } from 'vuex'\n\nexport default function useUsersDetails() {\n    const store = useStore()\n\n    const success = ref(false)\n    const users = computed(() => store.getters['getAllUsers'])\n    const userDetails = computed(() => store.getters['getUserDetails'])\n\n    const fetchAllUsers = () => store.dispatch('fetchAllUsers')\n    const fetchUserDetails = (user = 'profile') => store.dispatch('fetchUserDetails', user)\n\n    const updateUserProfile = async user => {\n        user.password !== user.confirmPassword\n            ? store.commit('utils/setError', { message: 'The password confirmation must match' }, { root: true })\n            : success.value = await store.dispatch('updateUserDetails', { user })\n    }\n    const updateUserDetails = async user => success.value = await store.dispatch('updateUserDetails', { user, route: user._id })\n\n    const deleteUser = userId => {\n        if (window.confirm(`Do you really want to remove the user ${userId}?`)) store.dispatch('deleteUser', userId)\n    }\n\n    return {\n        success,\n        users,\n        userDetails,\n        \n        fetchAllUsers,\n        fetchUserDetails,\n        updateUserProfile,\n        updateUserDetails,\n        deleteUser,\n        \n        isLoading: computed(() => store.getters['utils/isLoading']),\n        error: computed(() => store.getters['utils/getError'])\n    }\n}"]}]}