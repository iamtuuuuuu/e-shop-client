{"remainingRequest":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/babel-loader/lib/index.js!/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/composables/useCart.js","dependencies":[{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/composables/useCart.js","mtime":1622858474337},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0IHsgY29tcHV0ZWQsIHJlYWN0aXZlIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcic7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZUNhcnQoKSB7CiAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgdmFyIGNhcnRJdGVtcyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzWydnZXRDYXJ0SXRlbXMnXTsKICB9KTsKICB2YXIgc2hpcHBpbmdBZGRyZXNzID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHN0b3JlLmdldHRlcnNbJ2dldFNoaXBwaW5nQWRkcmVzcyddOwogIH0pOwogIHZhciBwYXltZW50TWV0aG9kID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHN0b3JlLmdldHRlcnNbJ2dldFBheW1lbnRNZXRob2QnXTsKICB9KTsKICB2YXIgY2FydFN1bW1hcnkgPSByZWFjdGl2ZSh7CiAgICBpdGVtc1ByaWNlOiBjYXJ0SXRlbXMudmFsdWUucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGl0ZW0pIHsKICAgICAgcmV0dXJuIGFjYyArIGl0ZW0ucXVhbnRpdHkgKiBpdGVtLnByaWNlOwogICAgfSwgMCkKICB9KTsKICBjYXJ0U3VtbWFyeS5zaGlwcGluZ1ByaWNlID0gMDsKICBjYXJ0U3VtbWFyeS50YXhQcmljZSA9IDA7CiAgY2FydFN1bW1hcnkudG90YWxQcmljZSA9IE51bWJlcigoY2FydFN1bW1hcnkuaXRlbXNQcmljZSArIGNhcnRTdW1tYXJ5LnNoaXBwaW5nUHJpY2UgKyBjYXJ0U3VtbWFyeS50YXhQcmljZSkudG9GaXhlZCgyKSk7CgogIHZhciBjaGVja291dCA9IGZ1bmN0aW9uIGNoZWNrb3V0KCkgewogICAgcmV0dXJuIHJvdXRlci5wdXNoKHsKICAgICAgbmFtZTogJ3NoaXBwaW5nJwogICAgfSk7CiAgfTsKCiAgdmFyIHNhdmVTaGlwcGluZ0FkZHJlc3MgPSBmdW5jdGlvbiBzYXZlU2hpcHBpbmdBZGRyZXNzKHNoaXBwaW5nQWRkcmVzcykgewogICAgc3RvcmUuZGlzcGF0Y2goJ3NhdmVTaGlwcGluZ0FkZHJlc3MnLCBzaGlwcGluZ0FkZHJlc3MpOwogICAgcm91dGVyLnB1c2goewogICAgICBuYW1lOiAncGF5bWVudCcKICAgIH0pOwogIH07CgogIHZhciBzYXZlUGF5bWVudE1ldGhvZCA9IGZ1bmN0aW9uIHNhdmVQYXltZW50TWV0aG9kKHBheW1lbnRNZXRob2QpIHsKICAgIHN0b3JlLmRpc3BhdGNoKCdzYXZlUGF5bWVudE1ldGhvZCcsIHBheW1lbnRNZXRob2QpOwogICAgcm91dGVyLnB1c2goewogICAgICBuYW1lOiAncGxhY2Vfb3JkZXInCiAgICB9KTsKICB9OwoKICByZXR1cm4gewogICAgY2FydEl0ZW1zOiBjYXJ0SXRlbXMsCiAgICBzaGlwcGluZ0FkZHJlc3M6IHNoaXBwaW5nQWRkcmVzcywKICAgIHBheW1lbnRNZXRob2Q6IHBheW1lbnRNZXRob2QsCiAgICBjYXJ0U3VtbWFyeTogY2FydFN1bW1hcnksCiAgICBjaGVja291dDogY2hlY2tvdXQsCiAgICBzYXZlU2hpcHBpbmdBZGRyZXNzOiBzYXZlU2hpcHBpbmdBZGRyZXNzLAogICAgc2F2ZVBheW1lbnRNZXRob2Q6IHNhdmVQYXltZW50TWV0aG9kLAogICAgaXNMb2FkaW5nOiBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzWyd1dGlscy9pc0xvYWRpbmcnXTsKICAgIH0pLAogICAgZXJyb3I6IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLmdldHRlcnNbJ3V0aWxzL2dldEVycm9yJ107CiAgICB9KQogIH07Cn0="},{"version":3,"sources":["/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/composables/useCart.js"],"names":["computed","reactive","useStore","useRouter","useCart","store","router","cartItems","getters","shippingAddress","paymentMethod","cartSummary","itemsPrice","value","reduce","acc","item","quantity","price","shippingPrice","taxPrice","totalPrice","Number","toFixed","checkout","push","name","saveShippingAddress","dispatch","savePaymentMethod","isLoading","error"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,QAAnB,QAAmC,KAAnC;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,SAASC,SAAT,QAA0B,YAA1B;AAEA,eAAe,SAASC,OAAT,GAAmB;AAC9B,MAAMC,KAAK,GAAGH,QAAQ,EAAtB;AACA,MAAMI,MAAM,GAAGH,SAAS,EAAxB;AAEA,MAAMI,SAAS,GAAGP,QAAQ,CAAC;AAAA,WAAMK,KAAK,CAACG,OAAN,CAAc,cAAd,CAAN;AAAA,GAAD,CAA1B;AACA,MAAMC,eAAe,GAAGT,QAAQ,CAAC;AAAA,WAAMK,KAAK,CAACG,OAAN,CAAc,oBAAd,CAAN;AAAA,GAAD,CAAhC;AACA,MAAME,aAAa,GAAGV,QAAQ,CAAC;AAAA,WAAMK,KAAK,CAACG,OAAN,CAAc,kBAAd,CAAN;AAAA,GAAD,CAA9B;AAEA,MAAMG,WAAW,GAAGV,QAAQ,CAAC;AACzBW,IAAAA,UAAU,EAAEL,SAAS,CAACM,KAAV,CAAgBC,MAAhB,CAAuB,UAACC,GAAD,EAAMC,IAAN;AAAA,aAAeD,GAAG,GAAGC,IAAI,CAACC,QAAL,GAAgBD,IAAI,CAACE,KAA1C;AAAA,KAAvB,EAAwE,CAAxE;AADa,GAAD,CAA5B;AAGAP,EAAAA,WAAW,CAACQ,aAAZ,GAA4B,CAA5B;AACAR,EAAAA,WAAW,CAACS,QAAZ,GAAuB,CAAvB;AACAT,EAAAA,WAAW,CAACU,UAAZ,GAAyBC,MAAM,CAAC,CAACX,WAAW,CAACC,UAAZ,GAAyBD,WAAW,CAACQ,aAArC,GAAqDR,WAAW,CAACS,QAAlE,EAA4EG,OAA5E,CAAoF,CAApF,CAAD,CAA/B;;AAEA,MAAMC,QAAQ,GAAG,SAAXA,QAAW;AAAA,WAAMlB,MAAM,CAACmB,IAAP,CAAY;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAZ,CAAN;AAAA,GAAjB;;AACA,MAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAAlB,eAAe,EAAI;AAC3CJ,IAAAA,KAAK,CAACuB,QAAN,CAAe,qBAAf,EAAsCnB,eAAtC;AACAH,IAAAA,MAAM,CAACmB,IAAP,CAAY;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAZ;AACH,GAHD;;AAIA,MAAMG,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAnB,aAAa,EAAI;AACvCL,IAAAA,KAAK,CAACuB,QAAN,CAAe,mBAAf,EAAoClB,aAApC;AACAJ,IAAAA,MAAM,CAACmB,IAAP,CAAY;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAZ;AACH,GAHD;;AAKA,SAAO;AACHnB,IAAAA,SAAS,EAATA,SADG;AAEHE,IAAAA,eAAe,EAAfA,eAFG;AAGHC,IAAAA,aAAa,EAAbA,aAHG;AAIHC,IAAAA,WAAW,EAAXA,WAJG;AAMHa,IAAAA,QAAQ,EAARA,QANG;AAOHG,IAAAA,mBAAmB,EAAnBA,mBAPG;AAQHE,IAAAA,iBAAiB,EAAjBA,iBARG;AAUHC,IAAAA,SAAS,EAAE9B,QAAQ,CAAC;AAAA,aAAMK,KAAK,CAACG,OAAN,CAAc,iBAAd,CAAN;AAAA,KAAD,CAVhB;AAWHuB,IAAAA,KAAK,EAAE/B,QAAQ,CAAC;AAAA,aAAMK,KAAK,CAACG,OAAN,CAAc,gBAAd,CAAN;AAAA,KAAD;AAXZ,GAAP;AAaH","sourcesContent":["import { computed, reactive } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\n\nexport default function useCart() {\n    const store = useStore()\n    const router = useRouter()\n\n    const cartItems = computed(() => store.getters['getCartItems'])\n    const shippingAddress = computed(() => store.getters['getShippingAddress'])\n    const paymentMethod = computed(() => store.getters['getPaymentMethod'])\n\n    const cartSummary = reactive({\n        itemsPrice: cartItems.value.reduce((acc, item) => acc + item.quantity * item.price, 0)\n    })\n    cartSummary.shippingPrice = 0\n    cartSummary.taxPrice = 0\n    cartSummary.totalPrice = Number((cartSummary.itemsPrice + cartSummary.shippingPrice + cartSummary.taxPrice).toFixed(2))\n\n    const checkout = () => router.push({ name: 'shipping' })\n    const saveShippingAddress = shippingAddress => {\n        store.dispatch('saveShippingAddress', shippingAddress)\n        router.push({ name: 'payment' })\n    }\n    const savePaymentMethod = paymentMethod => {\n        store.dispatch('savePaymentMethod', paymentMethod)\n        router.push({ name: 'place_order' })\n    }\n    \n    return {\n        cartItems,\n        shippingAddress,\n        paymentMethod,\n        cartSummary,\n\n        checkout,\n        saveShippingAddress,\n        savePaymentMethod,\n        \n        isLoading: computed(() => store.getters['utils/isLoading']),\n        error: computed(() => store.getters['utils/getError'])\n    }\n}"]}]}