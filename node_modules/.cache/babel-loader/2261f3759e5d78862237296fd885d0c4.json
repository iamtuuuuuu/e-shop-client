{"remainingRequest":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/thread-loader/dist/cjs.js!/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/babel-loader/lib/index.js!/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/router/index.js","dependencies":[{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/router/index.js","mtime":1621152090012},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvaG9tZS92dWFuaHR1L0Rlc2t0b3Avd29ya3NwYWNlL3Z1ZS9lc2hvcC9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0IHsgY3JlYXRlUm91dGVyLCBjcmVhdGVXZWJIaXN0b3J5IH0gZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCBzdG9yZSBmcm9tICcuLi9zdG9yZSc7CmltcG9ydCBhZG1pbiBmcm9tICcuL3JvdXRlcy9hZG1pbic7CmltcG9ydCBjYXJ0IGZyb20gJy4vcm91dGVzL2NhcnQnOwppbXBvcnQgdXNlcnMgZnJvbSAnLi9yb3V0ZXMvdXNlcnMnOwp2YXIgcm91dGVzID0gW3sKICBwYXRoOiAnLycsCiAgbmFtZTogJ2hvbWUnLAogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgKICAgIC8qIHdlYnBhY2tDaHVua05hbWU6ICJob21lLXZpZXciICovCiAgICAnQC92aWV3cy9Ib21lLnZ1ZScpOwogIH0KfSwgewogIHBhdGg6ICcvcHJvZHVjdHMvOmlkJywKICBuYW1lOiAncHJvZHVjdHMuc2hvdycsCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KAogICAgLyogd2VicGFja0NodW5rTmFtZTogInByb2R1Y3QtdmlldyIgKi8KICAgICdAL3ZpZXdzL1Byb2R1Y3QudnVlJyk7CiAgfQp9LCAvLyBPcmRlcnMKewogIHBhdGg6ICcvb3JkZXJzLzppZCcsCiAgbmFtZTogJ29yZGVycy5zaG93JywKICBtZXRhOiB7CiAgICByZXF1aXJlc0F1dGg6IHRydWUKICB9LAogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgKICAgIC8qIHdlYnBhY2tDaHVua05hbWU6ICJvcmRlci1kZXRhaWxzLXZpZXciICovCiAgICAnQC92aWV3cy9PcmRlcnMvT3JkZXJEZXRhaWxzLnZ1ZScpOwogIH0KfV0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShjYXJ0KSwgX3RvQ29uc3VtYWJsZUFycmF5KHVzZXJzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGFkbWluKSk7CnZhciByb3V0ZXIgPSBjcmVhdGVSb3V0ZXIoewogIGhpc3Rvcnk6IGNyZWF0ZVdlYkhpc3RvcnkocHJvY2Vzcy5lbnYuQkFTRV9VUkwpLAogIHJvdXRlczogcm91dGVzLAogIHNjcm9sbEJlaGF2aW9yOiBmdW5jdGlvbiBzY3JvbGxCZWhhdmlvcigpIHsKICAgIHJldHVybiB7CiAgICAgIGxlZnQ6IDAsCiAgICAgIHRvcDogMAogICAgfTsKICB9Cn0pOyAvLyBDaGVja2luZyBmb3IgbG9nZ2VkIHVzZXIgYW5kIGZvciBhZG1pbiB1c2VyCgpyb3V0ZXIuYmVmb3JlRWFjaChmdW5jdGlvbiAodG8sIF8sIG5leHQpIHsKICB2YXIgdXNlciA9IHN0b3JlLmdldHRlcnNbJ2dldExvZ2dlZFVzZXInXTsKICBpZiAodG8ubWF0Y2hlZC5zb21lKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgcmV0dXJuIHJvdXRlLm1ldGEucmVxdWlyZXNBdXRoID09PSB0cnVlOwogIH0pICYmICF1c2VyLl9pZCkgbmV4dCh7CiAgICBuYW1lOiAnbG9naW4nLAogICAgcXVlcnk6IHsKICAgICAgcmVkaXJlY3Q6IHRvLmZ1bGxQYXRoLnNsaWNlKDEpCiAgICB9CiAgfSk7ZWxzZSBpZiAodG8ubWF0Y2hlZC5zb21lKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgcmV0dXJuIHJvdXRlLm1ldGEucmVxdWlyZXNBdXRoID09PSAnQWRtaW4nOwogIH0pICYmICF1c2VyLmlzQWRtaW4pIG5leHQoewogICAgbmFtZTogJ0hvbWUnCiAgfSk7ZWxzZSBuZXh0KCk7Cn0pOwpleHBvcnQgZGVmYXVsdCByb3V0ZXI7"},{"version":3,"sources":["/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/router/index.js"],"names":["createRouter","createWebHistory","store","admin","cart","users","routes","path","name","component","meta","requiresAuth","router","history","process","env","BASE_URL","scrollBehavior","left","top","beforeEach","to","_","next","user","getters","matched","some","route","_id","query","redirect","fullPath","slice","isAdmin"],"mappings":";;;;;;AAAA,SAASA,YAAT,EAAuBC,gBAAvB,QAA+C,YAA/C;AACA,OAAOC,KAAP,MAAkB,UAAlB;AAEA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AAEA,IAAMC,MAAM,IACR;AACIC,EAAAA,IAAI,EAAE,GADV;AAEIC,EAAAA,IAAI,EAAE,MAFV;AAGIC,EAAAA,SAAS,EAAE;AAAA,WAAM;AAAO;AAAoC,sBAA3C,CAAN;AAAA;AAHf,CADQ,EAMR;AACIF,EAAAA,IAAI,EAAE,eADV;AAEIC,EAAAA,IAAI,EAAE,eAFV;AAGIC,EAAAA,SAAS,EAAE;AAAA,WAAM;AAAO;AAAuC,yBAA9C,CAAN;AAAA;AAHf,CANQ,EAYR;AACA;AACIF,EAAAA,IAAI,EAAE,aADV;AAEIC,EAAAA,IAAI,EAAE,aAFV;AAGIE,EAAAA,IAAI,EAAE;AAAEC,IAAAA,YAAY,EAAE;AAAhB,GAHV;AAIIF,EAAAA,SAAS,EAAE;AAAA,WAAM;AAAO;AAA6C,qCAApD,CAAN;AAAA;AAJf,CAbQ,4BAoBLL,IApBK,sBAqBLC,KArBK,sBAsBLF,KAtBK,EAAZ;AAyBA,IAAMS,MAAM,GAAGZ,YAAY,CAAC;AACxBa,EAAAA,OAAO,EAAEZ,gBAAgB,CAACa,OAAO,CAACC,GAAR,CAAYC,QAAb,CADD;AAExBV,EAAAA,MAAM,EAANA,MAFwB;AAGxBW,EAAAA,cAAc,EAAE;AAAA,WAAO;AAAEC,MAAAA,IAAI,EAAE,CAAR;AAAWC,MAAAA,GAAG,EAAE;AAAhB,KAAP;AAAA;AAHQ,CAAD,CAA3B,C,CAMA;;AACAP,MAAM,CAACQ,UAAP,CAAkB,UAACC,EAAD,EAAKC,CAAL,EAAQC,IAAR,EAAiB;AAC/B,MAAMC,IAAI,GAAItB,KAAK,CAACuB,OAAN,CAAc,eAAd,CAAd;AAEA,MAAIJ,EAAE,CAACK,OAAH,CAAWC,IAAX,CAAgB,UAAAC,KAAK;AAAA,WAAIA,KAAK,CAAClB,IAAN,CAAWC,YAAX,KAA4B,IAAhC;AAAA,GAArB,KAA8D,CAACa,IAAI,CAACK,GAAxE,EACIN,IAAI,CAAC;AAAEf,IAAAA,IAAI,EAAE,OAAR;AAAiBsB,IAAAA,KAAK,EAAE;AAAEC,MAAAA,QAAQ,EAAEV,EAAE,CAACW,QAAH,CAAYC,KAAZ,CAAkB,CAAlB;AAAZ;AAAxB,GAAD,CAAJ,CADJ,KAGK,IAAIZ,EAAE,CAACK,OAAH,CAAWC,IAAX,CAAgB,UAAAC,KAAK;AAAA,WAAIA,KAAK,CAAClB,IAAN,CAAWC,YAAX,KAA4B,OAAhC;AAAA,GAArB,KAAiE,CAACa,IAAI,CAACU,OAA3E,EAAoFX,IAAI,CAAC;AAAEf,IAAAA,IAAI,EAAE;AAAR,GAAD,CAAJ,CAApF,KAEAe,IAAI;AACZ,CATD;AAWA,eAAeX,MAAf","sourcesContent":["import { createRouter, createWebHistory } from 'vue-router'\nimport store from '../store'\n\nimport admin from './routes/admin'\nimport cart from './routes/cart'\nimport users from './routes/users'\n\nconst routes = [\n    {\n        path: '/',\n        name: 'home',\n        component: () => import(/* webpackChunkName: \"home-view\" */ '@/views/Home.vue')\n    },\n    {\n        path: '/products/:id',\n        name: 'products.show',\n        component: () => import(/* webpackChunkName: \"product-view\" */ '@/views/Product.vue')\n    },\n    \n    // Orders\n    {\n        path: '/orders/:id',\n        name: 'orders.show',\n        meta: { requiresAuth: true },\n        component: () => import(/* webpackChunkName: \"order-details-view\" */ '@/views/Orders/OrderDetails.vue')\n    },\n\n    ...cart,\n    ...users,\n    ...admin,\n]\n\nconst router = createRouter({\n    history: createWebHistory(process.env.BASE_URL),\n    routes,\n    scrollBehavior: () => ({ left: 0, top: 0 })\n})\n\n// Checking for logged user and for admin user\nrouter.beforeEach((to, _, next) => {\n    const user = (store.getters['getLoggedUser'])\n    \n    if (to.matched.some(route => route.meta.requiresAuth === true) && !user._id)\n        next({ name: 'login', query: { redirect: to.fullPath.slice(1) } })\n    \n    else if (to.matched.some(route => route.meta.requiresAuth === 'Admin') && !user.isAdmin) next({ name: 'Home' })\n\n    else next()\n})\n\nexport default router\n"]}]}