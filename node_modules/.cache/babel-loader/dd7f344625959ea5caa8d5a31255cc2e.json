{"remainingRequest":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/babel-loader/lib/index.js!/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/composables/useOrders.js","dependencies":[{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/composables/useOrders.js","mtime":1622514460602},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3Z1YW5odHUvRGVza3RvcC93b3Jrc3BhY2UvdnVlL2VzaG9wL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VPcmRlcnMoKSB7CiAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgdmFyIG9yZGVycyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzWydnZXRBbGxPcmRlcnMnXTsKICB9KTsKICB2YXIgb3JkZXIgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gc3RvcmUuZ2V0dGVyc1snZ2V0U2luZ2xlT3JkZXInXTsKICB9KTsKCiAgdmFyIGZldGNoQWxsT3JkZXJzID0gZnVuY3Rpb24gZmV0Y2hBbGxPcmRlcnMoKSB7CiAgICB2YXIgdXNlcklkID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQ7CiAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ2ZldGNoQWxsT3JkZXJzJywgdXNlcklkKTsKICB9OwoKICB2YXIgZmV0Y2hNeU9yZGVycyA9IGZ1bmN0aW9uIGZldGNoTXlPcmRlcnMoKSB7CiAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ2ZldGNoTXlPcmRlcnMnKTsKICB9OwoKICB2YXIgZmV0Y2hTaW5nbGVPcmRlciA9IGZ1bmN0aW9uIGZldGNoU2luZ2xlT3JkZXIob3JkZXJJZCkgewogICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdmZXRjaFNpbmdsZU9yZGVyJywgb3JkZXJJZCk7CiAgfTsKCiAgdmFyIHBsYWNlT3JkZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoY2FydFN1bW1hcnkpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnY3JlYXRlT3JkZXInLCBwaG9uZSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgaWYgKCFfY29udGV4dC5zZW50KSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogJ29yZGVycy5zaG93JywKICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICBpZDogb3JkZXIudmFsdWUuX2lkCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiBwbGFjZU9yZGVyKF94KSB7CiAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIHBheU9yZGVyID0gZnVuY3Rpb24gcGF5T3JkZXIob3JkZXJJZCwgZGV0YWlscykgewogICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdwYXlPcmRlcicsIHsKICAgICAgb3JkZXJJZDogb3JkZXJJZCwKICAgICAgZGV0YWlsczogZGV0YWlscwogICAgfSk7CiAgfTsKCiAgdmFyIGZldGNoUGF5cGFsQ2xpZW50SWQgPSBmdW5jdGlvbiBmZXRjaFBheXBhbENsaWVudElkKCkgewogICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdwYXlwYWxDbGllbnRJZCcpOwogIH07CgogIHJldHVybiB7CiAgICBvcmRlcnM6IG9yZGVycywKICAgIG9yZGVyOiBvcmRlciwKICAgIGZldGNoQWxsT3JkZXJzOiBmZXRjaEFsbE9yZGVycywKICAgIGZldGNoTXlPcmRlcnM6IGZldGNoTXlPcmRlcnMsCiAgICBmZXRjaFNpbmdsZU9yZGVyOiBmZXRjaFNpbmdsZU9yZGVyLAogICAgcGxhY2VPcmRlcjogcGxhY2VPcmRlciwKICAgIHBheU9yZGVyOiBwYXlPcmRlciwKICAgIGZldGNoUGF5cGFsQ2xpZW50SWQ6IGZldGNoUGF5cGFsQ2xpZW50SWQsCiAgICBpc0xvYWRpbmc6IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLmdldHRlcnNbJ3V0aWxzL2lzTG9hZGluZyddOwogICAgfSksCiAgICBlcnJvcjogY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuZ2V0dGVyc1sndXRpbHMvZ2V0RXJyb3InXTsKICAgIH0pCiAgfTsKfQ=="},{"version":3,"sources":["/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/composables/useOrders.js"],"names":["computed","useStore","useRouter","useOrders","store","router","orders","getters","order","fetchAllOrders","userId","undefined","dispatch","fetchMyOrders","fetchSingleOrder","orderId","placeOrder","cartSummary","phone","push","name","params","id","value","_id","payOrder","details","fetchPaypalClientId","isLoading","error"],"mappings":";;AAAA,SAASA,QAAT,QAAyB,KAAzB;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,SAASC,SAAT,QAA0B,YAA1B;AAEA,eAAe,SAASC,SAAT,GAAqB;AAChC,MAAMC,KAAK,GAAGH,QAAQ,EAAtB;AACA,MAAMI,MAAM,GAAGH,SAAS,EAAxB;AAEA,MAAMI,MAAM,GAAGN,QAAQ,CAAC;AAAA,WAAMI,KAAK,CAACG,OAAN,CAAc,cAAd,CAAN;AAAA,GAAD,CAAvB;AACA,MAAMC,KAAK,GAAGR,QAAQ,CAAC;AAAA,WAAMI,KAAK,CAACG,OAAN,CAAc,gBAAd,CAAN;AAAA,GAAD,CAAtB;;AAEA,MAAME,cAAc,GAAG,SAAjBA,cAAiB;AAAA,QAACC,MAAD,uEAAUC,SAAV;AAAA,WAAwBP,KAAK,CAACQ,QAAN,CAAe,gBAAf,EAAiCF,MAAjC,CAAxB;AAAA,GAAvB;;AACA,MAAMG,aAAa,GAAG,SAAhBA,aAAgB;AAAA,WAAMT,KAAK,CAACQ,QAAN,CAAe,eAAf,CAAN;AAAA,GAAtB;;AACA,MAAME,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAC,OAAO;AAAA,WAAIX,KAAK,CAACQ,QAAN,CAAe,kBAAf,EAAmCG,OAAnC,CAAJ;AAAA,GAAhC;;AAEA,MAAMC,UAAU;AAAA,uEAAG,iBAAMC,WAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACLb,KAAK,CAACQ,QAAN,CAAe,aAAf,EAA8BM,KAA9B,CADK;;AAAA;AAAA;AAAA;AAAA;AAAA;;AACiCb,cAAAA,MAAM,CAACc,IAAP,CAAY;AAAEC,gBAAAA,IAAI,EAAE,aAAR;AAAuBC,gBAAAA,MAAM,EAAE;AAAEC,kBAAAA,EAAE,EAAEd,KAAK,CAACe,KAAN,CAAYC;AAAlB;AAA/B,eAAZ;;AADjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAVR,UAAU;AAAA;AAAA;AAAA,KAAhB;;AAIA,MAAMS,QAAQ,GAAG,SAAXA,QAAW,CAACV,OAAD,EAAUW,OAAV;AAAA,WAAsBtB,KAAK,CAACQ,QAAN,CAAe,UAAf,EAA2B;AAAEG,MAAAA,OAAO,EAAPA,OAAF;AAAWW,MAAAA,OAAO,EAAPA;AAAX,KAA3B,CAAtB;AAAA,GAAjB;;AACA,MAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB;AAAA,WAAMvB,KAAK,CAACQ,QAAN,CAAe,gBAAf,CAAN;AAAA,GAA5B;;AAGA,SAAO;AACHN,IAAAA,MAAM,EAANA,MADG;AAEHE,IAAAA,KAAK,EAALA,KAFG;AAIHC,IAAAA,cAAc,EAAdA,cAJG;AAKHI,IAAAA,aAAa,EAAbA,aALG;AAMHC,IAAAA,gBAAgB,EAAhBA,gBANG;AAOHE,IAAAA,UAAU,EAAVA,UAPG;AAQHS,IAAAA,QAAQ,EAARA,QARG;AASHE,IAAAA,mBAAmB,EAAnBA,mBATG;AAWHC,IAAAA,SAAS,EAAE5B,QAAQ,CAAC;AAAA,aAAMI,KAAK,CAACG,OAAN,CAAc,iBAAd,CAAN;AAAA,KAAD,CAXhB;AAYHsB,IAAAA,KAAK,EAAE7B,QAAQ,CAAC;AAAA,aAAMI,KAAK,CAACG,OAAN,CAAc,gBAAd,CAAN;AAAA,KAAD;AAZZ,GAAP;AAcH","sourcesContent":["import { computed } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\n\nexport default function useOrders() {\n    const store = useStore()\n    const router = useRouter()\n\n    const orders = computed(() => store.getters['getAllOrders'])\n    const order = computed(() => store.getters['getSingleOrder'])\n\n    const fetchAllOrders = (userId = undefined) => store.dispatch('fetchAllOrders', userId)\n    const fetchMyOrders = () => store.dispatch('fetchMyOrders')\n    const fetchSingleOrder = orderId => store.dispatch('fetchSingleOrder', orderId)\n    \n    const placeOrder = async cartSummary => {\n        if (await store.dispatch('createOrder', phone)) router.push({ name: 'orders.show', params: { id: order.value._id }})\n    }\n    \n    const payOrder = (orderId, details) => store.dispatch('payOrder', { orderId, details })\n    const fetchPaypalClientId = () => store.dispatch('paypalClientId')\n\n    \n    return {\n        orders,\n        order,\n\n        fetchAllOrders,\n        fetchMyOrders,\n        fetchSingleOrder,\n        placeOrder,\n        payOrder,\n        fetchPaypalClientId,\n\n        isLoading: computed(() => store.getters['utils/isLoading']),\n        error: computed(() => store.getters['utils/getError'])\n    }\n}\n"]}]}