{"remainingRequest":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/thread-loader/dist/cjs.js!/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/babel-loader/lib/index.js!/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/composables/useCart.js","dependencies":[{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/composables/useCart.js","mtime":1621152090012},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0IHsgY29tcHV0ZWQsIHJlYWN0aXZlIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcic7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZUNhcnQoKSB7CiAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgdmFyIGNhcnRJdGVtcyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzWydnZXRDYXJ0SXRlbXMnXTsKICB9KTsKICB2YXIgc2hpcHBpbmdBZGRyZXNzID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHN0b3JlLmdldHRlcnNbJ2dldFNoaXBwaW5nQWRkcmVzcyddOwogIH0pOwogIHZhciBwYXltZW50TWV0aG9kID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHN0b3JlLmdldHRlcnNbJ2dldFBheW1lbnRNZXRob2QnXTsKICB9KTsKICB2YXIgY2FydFN1bW1hcnkgPSByZWFjdGl2ZSh7CiAgICBpdGVtc1ByaWNlOiBjYXJ0SXRlbXMudmFsdWUucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGl0ZW0pIHsKICAgICAgcmV0dXJuIGFjYyArIGl0ZW0ucXVhbnRpdHkgKiBpdGVtLnByaWNlOwogICAgfSwgMCkKICB9KTsKICBjYXJ0U3VtbWFyeS5zaGlwcGluZ1ByaWNlID0gY2FydFN1bW1hcnkuaXRlbXNQcmljZSA+IDEwMCA/IDAgOiA1MDsKICBjYXJ0U3VtbWFyeS50YXhQcmljZSA9IE51bWJlcigoMC4xNSAqIGNhcnRTdW1tYXJ5Lml0ZW1zUHJpY2UpLnRvRml4ZWQoMikpOwogIGNhcnRTdW1tYXJ5LnRvdGFsUHJpY2UgPSBOdW1iZXIoKGNhcnRTdW1tYXJ5Lml0ZW1zUHJpY2UgKyBjYXJ0U3VtbWFyeS5zaGlwcGluZ1ByaWNlICsgY2FydFN1bW1hcnkudGF4UHJpY2UpLnRvRml4ZWQoMikpOwoKICB2YXIgY2hlY2tvdXQgPSBmdW5jdGlvbiBjaGVja291dCgpIHsKICAgIHJldHVybiByb3V0ZXIucHVzaCh7CiAgICAgIG5hbWU6ICdzaGlwcGluZycKICAgIH0pOwogIH07CgogIHZhciBzYXZlU2hpcHBpbmdBZGRyZXNzID0gZnVuY3Rpb24gc2F2ZVNoaXBwaW5nQWRkcmVzcyhzaGlwcGluZ0FkZHJlc3MpIHsKICAgIHN0b3JlLmRpc3BhdGNoKCdzYXZlU2hpcHBpbmdBZGRyZXNzJywgc2hpcHBpbmdBZGRyZXNzKTsKICAgIHJvdXRlci5wdXNoKHsKICAgICAgbmFtZTogJ3BheW1lbnQnCiAgICB9KTsKICB9OwoKICB2YXIgc2F2ZVBheW1lbnRNZXRob2QgPSBmdW5jdGlvbiBzYXZlUGF5bWVudE1ldGhvZChwYXltZW50TWV0aG9kKSB7CiAgICBzdG9yZS5kaXNwYXRjaCgnc2F2ZVBheW1lbnRNZXRob2QnLCBwYXltZW50TWV0aG9kKTsKICAgIHJvdXRlci5wdXNoKHsKICAgICAgbmFtZTogJ3BsYWNlX29yZGVyJwogICAgfSk7CiAgfTsKCiAgcmV0dXJuIHsKICAgIGNhcnRJdGVtczogY2FydEl0ZW1zLAogICAgc2hpcHBpbmdBZGRyZXNzOiBzaGlwcGluZ0FkZHJlc3MsCiAgICBwYXltZW50TWV0aG9kOiBwYXltZW50TWV0aG9kLAogICAgY2FydFN1bW1hcnk6IGNhcnRTdW1tYXJ5LAogICAgY2hlY2tvdXQ6IGNoZWNrb3V0LAogICAgc2F2ZVNoaXBwaW5nQWRkcmVzczogc2F2ZVNoaXBwaW5nQWRkcmVzcywKICAgIHNhdmVQYXltZW50TWV0aG9kOiBzYXZlUGF5bWVudE1ldGhvZCwKICAgIGlzTG9hZGluZzogY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuZ2V0dGVyc1sndXRpbHMvaXNMb2FkaW5nJ107CiAgICB9KSwKICAgIGVycm9yOiBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzWyd1dGlscy9nZXRFcnJvciddOwogICAgfSkKICB9Owp9"},{"version":3,"sources":["/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/composables/useCart.js"],"names":["computed","reactive","useStore","useRouter","useCart","store","router","cartItems","getters","shippingAddress","paymentMethod","cartSummary","itemsPrice","value","reduce","acc","item","quantity","price","shippingPrice","taxPrice","Number","toFixed","totalPrice","checkout","push","name","saveShippingAddress","dispatch","savePaymentMethod","isLoading","error"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,QAAnB,QAAmC,KAAnC;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,SAASC,SAAT,QAA0B,YAA1B;AAEA,eAAe,SAASC,OAAT,GAAmB;AAC9B,MAAMC,KAAK,GAAGH,QAAQ,EAAtB;AACA,MAAMI,MAAM,GAAGH,SAAS,EAAxB;AAEA,MAAMI,SAAS,GAAGP,QAAQ,CAAC;AAAA,WAAMK,KAAK,CAACG,OAAN,CAAc,cAAd,CAAN;AAAA,GAAD,CAA1B;AACA,MAAMC,eAAe,GAAGT,QAAQ,CAAC;AAAA,WAAMK,KAAK,CAACG,OAAN,CAAc,oBAAd,CAAN;AAAA,GAAD,CAAhC;AACA,MAAME,aAAa,GAAGV,QAAQ,CAAC;AAAA,WAAMK,KAAK,CAACG,OAAN,CAAc,kBAAd,CAAN;AAAA,GAAD,CAA9B;AAEA,MAAMG,WAAW,GAAGV,QAAQ,CAAC;AACzBW,IAAAA,UAAU,EAAEL,SAAS,CAACM,KAAV,CAAgBC,MAAhB,CAAuB,UAACC,GAAD,EAAMC,IAAN;AAAA,aAAeD,GAAG,GAAGC,IAAI,CAACC,QAAL,GAAgBD,IAAI,CAACE,KAA1C;AAAA,KAAvB,EAAwE,CAAxE;AADa,GAAD,CAA5B;AAGAP,EAAAA,WAAW,CAACQ,aAAZ,GAA4BR,WAAW,CAACC,UAAZ,GAAyB,GAAzB,GAA+B,CAA/B,GAAmC,EAA/D;AACAD,EAAAA,WAAW,CAACS,QAAZ,GAAuBC,MAAM,CAAC,CAAC,OAAOV,WAAW,CAACC,UAApB,EAAgCU,OAAhC,CAAwC,CAAxC,CAAD,CAA7B;AACAX,EAAAA,WAAW,CAACY,UAAZ,GAAyBF,MAAM,CAAC,CAACV,WAAW,CAACC,UAAZ,GAAyBD,WAAW,CAACQ,aAArC,GAAqDR,WAAW,CAACS,QAAlE,EAA4EE,OAA5E,CAAoF,CAApF,CAAD,CAA/B;;AAGA,MAAME,QAAQ,GAAG,SAAXA,QAAW;AAAA,WAAMlB,MAAM,CAACmB,IAAP,CAAY;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAZ,CAAN;AAAA,GAAjB;;AACA,MAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAAlB,eAAe,EAAI;AAC3CJ,IAAAA,KAAK,CAACuB,QAAN,CAAe,qBAAf,EAAsCnB,eAAtC;AACAH,IAAAA,MAAM,CAACmB,IAAP,CAAY;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAZ;AACH,GAHD;;AAIA,MAAMG,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAnB,aAAa,EAAI;AACvCL,IAAAA,KAAK,CAACuB,QAAN,CAAe,mBAAf,EAAoClB,aAApC;AACAJ,IAAAA,MAAM,CAACmB,IAAP,CAAY;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAZ;AACH,GAHD;;AAKA,SAAO;AACHnB,IAAAA,SAAS,EAATA,SADG;AAEHE,IAAAA,eAAe,EAAfA,eAFG;AAGHC,IAAAA,aAAa,EAAbA,aAHG;AAIHC,IAAAA,WAAW,EAAXA,WAJG;AAMHa,IAAAA,QAAQ,EAARA,QANG;AAOHG,IAAAA,mBAAmB,EAAnBA,mBAPG;AAQHE,IAAAA,iBAAiB,EAAjBA,iBARG;AAUHC,IAAAA,SAAS,EAAE9B,QAAQ,CAAC;AAAA,aAAMK,KAAK,CAACG,OAAN,CAAc,iBAAd,CAAN;AAAA,KAAD,CAVhB;AAWHuB,IAAAA,KAAK,EAAE/B,QAAQ,CAAC;AAAA,aAAMK,KAAK,CAACG,OAAN,CAAc,gBAAd,CAAN;AAAA,KAAD;AAXZ,GAAP;AAaH","sourcesContent":["import { computed, reactive } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\n\nexport default function useCart() {\n    const store = useStore()\n    const router = useRouter()\n\n    const cartItems = computed(() => store.getters['getCartItems'])\n    const shippingAddress = computed(() => store.getters['getShippingAddress'])\n    const paymentMethod = computed(() => store.getters['getPaymentMethod'])\n\n    const cartSummary = reactive({\n        itemsPrice: cartItems.value.reduce((acc, item) => acc + item.quantity * item.price, 0)\n    })\n    cartSummary.shippingPrice = cartSummary.itemsPrice > 100 ? 0 : 50\n    cartSummary.taxPrice = Number((0.15 * cartSummary.itemsPrice).toFixed(2))\n    cartSummary.totalPrice = Number((cartSummary.itemsPrice + cartSummary.shippingPrice + cartSummary.taxPrice).toFixed(2))\n\n\n    const checkout = () => router.push({ name: 'shipping' })\n    const saveShippingAddress = shippingAddress => {\n        store.dispatch('saveShippingAddress', shippingAddress)\n        router.push({ name: 'payment' })\n    }\n    const savePaymentMethod = paymentMethod => {\n        store.dispatch('savePaymentMethod', paymentMethod)\n        router.push({ name: 'place_order' })\n    }\n    \n    return {\n        cartItems,\n        shippingAddress,\n        paymentMethod,\n        cartSummary,\n\n        checkout,\n        saveShippingAddress,\n        savePaymentMethod,\n        \n        isLoading: computed(() => store.getters['utils/isLoading']),\n        error: computed(() => store.getters['utils/getError'])\n    }\n}"]}]}