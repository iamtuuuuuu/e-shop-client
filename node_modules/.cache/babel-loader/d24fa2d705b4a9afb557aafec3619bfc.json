{"remainingRequest":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/thread-loader/dist/cjs.js!/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/babel-loader/lib/index.js!/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/store/actionHandler.js","dependencies":[{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/store/actionHandler.js","mtime":1622166547208},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoZm4pIHsKICByZXR1cm4gZnVuY3Rpb24gKGNvbnRleHQsIHBheWxvYWQpIHsKICAgIGNvbnRleHQuY29tbWl0KCd1dGlscy9zZXRMb2FkaW5nJywgdHJ1ZSwgewogICAgICByb290OiB0cnVlCiAgICB9KTsKICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZm4oY29udGV4dCwgcGF5bG9hZCkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBjb250ZXh0LmNvbW1pdCgndXRpbHMvcmVzZXRFcnJvcicsIG51bGwsIHsKICAgICAgICByb290OiB0cnVlCiAgICAgIH0pOwogICAgICByZXR1cm4gcmVzICE9PSBudWxsICYmIHJlcyAhPT0gdm9pZCAwID8gcmVzIDogdHJ1ZTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgY29uc29sZS5sb2coZXJyLCBlcnIucmVzcG9uc2UpOwogICAgICB2YXIgZXJyb3IgPSB7CiAgICAgICAgbWVzc2FnZTogZXJyLnJlc3BvbnNlICYmIGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UgPyBlcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlIDogZXJyLm1lc3NhZ2UsCiAgICAgICAgZXJyb3JzOiBlcnIucmVzcG9uc2UgJiYgZXJyLnJlc3BvbnNlLmRhdGEuZXJyb3JzID8gZXJyLnJlc3BvbnNlLmRhdGEuZXJyb3JzIDogdW5kZWZpbmVkLAogICAgICAgIHN0YXR1czogZXJyLnJlc3BvbnNlID8gZXJyLnJlc3BvbnNlLnN0YXR1cyA6IHVuZGVmaW5lZAogICAgICB9OwogICAgICBpZiAoZXJyLnJlc3BvbnNlICYmIGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT09ICdqd3QgZXhwaXJlZCcpIGNvbnRleHQuZGlzcGF0Y2goJ2xvZ291dFVzZXInKTsKICAgICAgY29udGV4dC5jb21taXQoJ3V0aWxzL3NldEVycm9yJywgZXJyb3IsIHsKICAgICAgICByb290OiB0cnVlCiAgICAgIH0pOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgY29udGV4dC5jb21taXQoJ3V0aWxzL3NldExvYWRpbmcnLCBmYWxzZSwgewogICAgICAgIHJvb3Q6IHRydWUKICAgICAgfSk7CiAgICB9KTsKICB9Owp9KTs="},{"version":3,"sources":["/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/store/actionHandler.js"],"names":["fn","context","payload","commit","root","Promise","resolve","then","res","catch","err","console","log","response","error","message","data","errors","undefined","status","dispatch","finally"],"mappings":";AAAA,gBAAe,UAAAA,EAAE;AAAA,SAAI,UAACC,OAAD,EAAUC,OAAV,EAAsB;AACvCD,IAAAA,OAAO,CAACE,MAAR,CAAe,kBAAf,EAAmC,IAAnC,EAAyC;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAzC;AAEA,WAAOC,OAAO,CAACC,OAAR,CAAgBN,EAAE,CAACC,OAAD,EAAUC,OAAV,CAAlB,EACFK,IADE,CACG,UAAAC,GAAG,EAAI;AACTP,MAAAA,OAAO,CAACE,MAAR,CAAe,kBAAf,EAAmC,IAAnC,EAAyC;AAAEC,QAAAA,IAAI,EAAE;AAAR,OAAzC;AAEA,aAAOI,GAAP,aAAOA,GAAP,cAAOA,GAAP,GAAc,IAAd;AACH,KALE,EAMFC,KANE,CAMI,UAAAC,GAAG,EAAI;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,EAAiBA,GAAG,CAACG,QAArB;AACA,UAAMC,KAAK,GAAG;AACVC,QAAAA,OAAO,EAAEL,GAAG,CAACG,QAAJ,IAAgBH,GAAG,CAACG,QAAJ,CAAaG,IAAb,CAAkBD,OAAlC,GAA4CL,GAAG,CAACG,QAAJ,CAAaG,IAAb,CAAkBD,OAA9D,GAAwEL,GAAG,CAACK,OAD3E;AAEVE,QAAAA,MAAM,EAAEP,GAAG,CAACG,QAAJ,IAAgBH,GAAG,CAACG,QAAJ,CAAaG,IAAb,CAAkBC,MAAlC,GAA2CP,GAAG,CAACG,QAAJ,CAAaG,IAAb,CAAkBC,MAA7D,GAAsEC,SAFpE;AAGVC,QAAAA,MAAM,EAAET,GAAG,CAACG,QAAJ,GAAeH,GAAG,CAACG,QAAJ,CAAaM,MAA5B,GAAqCD;AAHnC,OAAd;AAMA,UAAIR,GAAG,CAACG,QAAJ,IAAgBH,GAAG,CAACG,QAAJ,CAAaG,IAAb,CAAkBD,OAAlB,KAA8B,aAAlD,EACId,OAAO,CAACmB,QAAR,CAAiB,YAAjB;AAEJnB,MAAAA,OAAO,CAACE,MAAR,CAAe,gBAAf,EAAiCW,KAAjC,EAAwC;AAAEV,QAAAA,IAAI,EAAE;AAAR,OAAxC;AAEA,aAAO,KAAP;AACH,KApBE,EAqBFiB,OArBE,CAqBM,YAAM;AACXpB,MAAAA,OAAO,CAACE,MAAR,CAAe,kBAAf,EAAmC,KAAnC,EAA0C;AAAEC,QAAAA,IAAI,EAAE;AAAR,OAA1C;AACH,KAvBE,CAAP;AAwBH,GA3BgB;AAAA,CAAjB","sourcesContent":["export default fn => (context, payload) => {\n    context.commit('utils/setLoading', true, { root: true })\n\n    return Promise.resolve(fn(context, payload))\n        .then(res => {\n            context.commit('utils/resetError', null, { root: true })\n\n            return res ?? true\n        })\n        .catch(err => {\n            console.log(err, err.response)\n            const error = {\n                message: err.response && err.response.data.message ? err.response.data.message : err.message,\n                errors: err.response && err.response.data.errors ? err.response.data.errors : undefined,\n                status: err.response ? err.response.status : undefined,\n            }\n\n            if (err.response && err.response.data.message === 'jwt expired') \n                context.dispatch('logoutUser')\n                \n            context.commit('utils/setError', error, { root: true })\n            \n            return false\n        })\n        .finally(() => {\n            context.commit('utils/setLoading', false, { root: true })\n        })\n}"]}]}