{"remainingRequest":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/babel-loader/lib/index.js!/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/src/composables/useProducts.js","dependencies":[{"path":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/src/composables/useProducts.js","mtime":1621152090012},{"path":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3Z1YW5odHUvRGVza3RvcC93b3Jrc3BhY2Uvbm9kZWpzL01FVk4vcHJvc2hvcC9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgY29tcHV0ZWQsIHJlZiB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVzZVJvdXRlLCB1c2VSb3V0ZXIgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlUHJvZHVjdHMoKSB7CiAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICB2YXIgcm91dGUgPSB1c2VSb3V0ZSgpOwogIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICB2YXIgc3VjY2VzcyA9IHJlZihmYWxzZSk7CiAgdmFyIHByb2R1Y3RzID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHN0b3JlLmdldHRlcnNbJ2dldEFsbFByb2R1Y3RzJ107CiAgfSk7CiAgdmFyIHByb2R1Y3QgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gc3RvcmUuZ2V0dGVyc1snZ2V0U2luZ2xlUHJvZHVjdCddOwogIH0pOwogIC8qKgogICAqIFByb2R1Y3QgQ1JVRAogICAqLwoKICB2YXIgc2V0UHJvZHVjdHMgPSBmdW5jdGlvbiBzZXRQcm9kdWN0cygpIHsKICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnZmV0Y2hBbGxQcm9kdWN0cycpOwogIH07CgogIHZhciBzZXRQcm9kdWN0ID0gZnVuY3Rpb24gc2V0UHJvZHVjdCgpIHsKICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnZmV0Y2hTaW5nbGVQcm9kdWN0Jywgcm91dGUucGFyYW1zLmlkKTsKICB9OwoKICB2YXIgY3JlYXRlUHJvZHVjdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHByb2R1Y3RJZDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnY3JlYXRlUHJvZHVjdCcpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHByb2R1Y3RJZCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgaWYgKHByb2R1Y3RJZCkgcm91dGVyLnB1c2goIi9hZG1pbi9wcm9kdWN0cy8iLmNvbmNhdChwcm9kdWN0SWQpKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGNyZWF0ZVByb2R1Y3QoKSB7CiAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIHVwZGF0ZVByb2R1Y3QgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihwcm9kdWN0KSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgndXBkYXRlUHJvZHVjdCcsIHByb2R1Y3QpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHN1Y2Nlc3MudmFsdWUgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlUHJvZHVjdChfeCkgewogICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOwoKICB2YXIgZGVsZXRlUHJvZHVjdCA9IGZ1bmN0aW9uIGRlbGV0ZVByb2R1Y3QocHJvZHVjdElkKSB7CiAgICBpZiAod2luZG93LmNvbmZpcm0oIkRvIHlvdSByZWFsbHkgd2FudCB0byByZW1vdmUgdGhlIHByb2R1Y3QgIi5jb25jYXQocHJvZHVjdElkKSkpIHN0b3JlLmRpc3BhdGNoKCdkZWxldGVQcm9kdWN0JywgcHJvZHVjdElkKTsKICB9OwogIC8qKgogICAqIEFkZCBhbmQgUmVtb3ZlIHByb2R1Y3QgZnJvbSBjYXJ0CiAgICovCgoKICB2YXIgYWRkVG9DYXJ0ID0gZnVuY3Rpb24gYWRkVG9DYXJ0KGlkKSB7CiAgICB2YXIgcXR5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAxOwogICAgc3RvcmUuZGlzcGF0Y2goJ2FkZEl0ZW0nLCB7CiAgICAgIGlkOiBpZCwKICAgICAgcXVhbnRpdHk6IE51bWJlcihxdHkpCiAgICB9KTsKICAgIHJvdXRlci5wdXNoKHsKICAgICAgbmFtZTogJ2NhcnQnCiAgICB9KTsKICB9OwoKICB2YXIgcmVtb3ZlRnJvbUNhcnQgPSBmdW5jdGlvbiByZW1vdmVGcm9tQ2FydChpZCkgewogICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdyZW1vdmVJdGVtJywgaWQpOwogIH07CgogIHJldHVybiB7CiAgICBzdWNjZXNzOiBzdWNjZXNzLAogICAgcHJvZHVjdHM6IHByb2R1Y3RzLAogICAgcHJvZHVjdDogcHJvZHVjdCwKICAgIHNldFByb2R1Y3RzOiBzZXRQcm9kdWN0cywKICAgIHNldFByb2R1Y3Q6IHNldFByb2R1Y3QsCiAgICBjcmVhdGVQcm9kdWN0OiBjcmVhdGVQcm9kdWN0LAogICAgdXBkYXRlUHJvZHVjdDogdXBkYXRlUHJvZHVjdCwKICAgIGRlbGV0ZVByb2R1Y3Q6IGRlbGV0ZVByb2R1Y3QsCiAgICBhZGRUb0NhcnQ6IGFkZFRvQ2FydCwKICAgIHJlbW92ZUZyb21DYXJ0OiByZW1vdmVGcm9tQ2FydCwKICAgIGlzTG9hZGluZzogY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuZ2V0dGVyc1sndXRpbHMvaXNMb2FkaW5nJ107CiAgICB9KSwKICAgIGVycm9yOiBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzWyd1dGlscy9nZXRFcnJvciddOwogICAgfSkKICB9Owp9"},{"version":3,"sources":["/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/src/composables/useProducts.js"],"names":["computed","ref","useRoute","useRouter","useStore","useProducts","store","route","router","success","products","getters","product","setProducts","dispatch","setProduct","params","id","createProduct","productId","push","updateProduct","value","deleteProduct","window","confirm","addToCart","qty","quantity","Number","name","removeFromCart","isLoading","error"],"mappings":"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","sourcesContent":["import { computed, ref } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useStore } from 'vuex'\n\nexport default function useProducts() {\n    const store = useStore()\n    const route = useRoute()\n    const router = useRouter()\n\n    const success = ref(false)\n    const products = computed(() => store.getters['getAllProducts'])\n    const product = computed(() => store.getters['getSingleProduct'])\n\n    /**\n     * Product CRUD\n     */\n    const setProducts = () => store.dispatch('fetchAllProducts')\n    const setProduct = () => store.dispatch('fetchSingleProduct', route.params.id)\n    const createProduct = async () => {\n        const productId = await store.dispatch('createProduct')\n        \n        if (productId) router.push(`/admin/products/${productId}`)\n    }\n    const updateProduct = async product => {\n        success.value = await store.dispatch('updateProduct', product)\n    }\n    const deleteProduct = productId => {\n        if (window.confirm(`Do you really want to remove the product ${productId}`)) store.dispatch('deleteProduct', productId)\n    }\n    \n    /**\n     * Add and Remove product from cart\n     */\n    const addToCart = (id, qty = 1) => {\n        store.dispatch('addItem', {\n            id,\n            quantity: Number(qty)\n        })\n        router.push({ name: 'cart' })\n    }\n    const removeFromCart = id => store.dispatch('removeItem', id)\n\n    return {\n        success,\n        products,\n        product,\n\n        setProducts,\n        setProduct,\n        createProduct,\n        updateProduct,\n        deleteProduct,\n\n        addToCart,\n        removeFromCart,\n\n        isLoading: computed(() => store.getters['utils/isLoading']),\n        error: computed(() => store.getters['utils/getError'])\n    }\n}"]}]}