{"remainingRequest":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/babel-loader/lib/index.js!/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/composables/useProducts.js","dependencies":[{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/composables/useProducts.js","mtime":1621152090012},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3Z1YW5odHUvRGVza3RvcC93b3Jrc3BhY2UvdnVlL2VzaG9wL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBjb21wdXRlZCwgcmVmIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlUm91dGUsIHVzZVJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VQcm9kdWN0cygpIHsKICB2YXIgc3RvcmUgPSB1c2VTdG9yZSgpOwogIHZhciByb3V0ZSA9IHVzZVJvdXRlKCk7CiAgdmFyIHJvdXRlciA9IHVzZVJvdXRlcigpOwogIHZhciBzdWNjZXNzID0gcmVmKGZhbHNlKTsKICB2YXIgcHJvZHVjdHMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gc3RvcmUuZ2V0dGVyc1snZ2V0QWxsUHJvZHVjdHMnXTsKICB9KTsKICB2YXIgcHJvZHVjdCA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzWydnZXRTaW5nbGVQcm9kdWN0J107CiAgfSk7CiAgLyoqCiAgICogUHJvZHVjdCBDUlVECiAgICovCgogIHZhciBzZXRQcm9kdWN0cyA9IGZ1bmN0aW9uIHNldFByb2R1Y3RzKCkgewogICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdmZXRjaEFsbFByb2R1Y3RzJyk7CiAgfTsKCiAgdmFyIHNldFByb2R1Y3QgPSBmdW5jdGlvbiBzZXRQcm9kdWN0KCkgewogICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdmZXRjaFNpbmdsZVByb2R1Y3QnLCByb3V0ZS5wYXJhbXMuaWQpOwogIH07CgogIHZhciBjcmVhdGVQcm9kdWN0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgcHJvZHVjdElkOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdjcmVhdGVQcm9kdWN0Jyk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcHJvZHVjdElkID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBpZiAocHJvZHVjdElkKSByb3V0ZXIucHVzaCgiL2FkbWluL3Byb2R1Y3RzLyIuY29uY2F0KHByb2R1Y3RJZCkpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlUHJvZHVjdCgpIHsKICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOwoKICB2YXIgdXBkYXRlUHJvZHVjdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHByb2R1Y3QpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCd1cGRhdGVQcm9kdWN0JywgcHJvZHVjdCk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgc3VjY2Vzcy52YWx1ZSA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiB1cGRhdGVQcm9kdWN0KF94KSB7CiAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIHZhciBkZWxldGVQcm9kdWN0ID0gZnVuY3Rpb24gZGVsZXRlUHJvZHVjdChwcm9kdWN0SWQpIHsKICAgIGlmICh3aW5kb3cuY29uZmlybSgiRG8geW91IHJlYWxseSB3YW50IHRvIHJlbW92ZSB0aGUgcHJvZHVjdCAiLmNvbmNhdChwcm9kdWN0SWQpKSkgc3RvcmUuZGlzcGF0Y2goJ2RlbGV0ZVByb2R1Y3QnLCBwcm9kdWN0SWQpOwogIH07CiAgLyoqCiAgICogQWRkIGFuZCBSZW1vdmUgcHJvZHVjdCBmcm9tIGNhcnQKICAgKi8KCgogIHZhciBhZGRUb0NhcnQgPSBmdW5jdGlvbiBhZGRUb0NhcnQoaWQpIHsKICAgIHZhciBxdHkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDE7CiAgICBzdG9yZS5kaXNwYXRjaCgnYWRkSXRlbScsIHsKICAgICAgaWQ6IGlkLAogICAgICBxdWFudGl0eTogTnVtYmVyKHF0eSkKICAgIH0pOwogICAgcm91dGVyLnB1c2goewogICAgICBuYW1lOiAnY2FydCcKICAgIH0pOwogIH07CgogIHZhciByZW1vdmVGcm9tQ2FydCA9IGZ1bmN0aW9uIHJlbW92ZUZyb21DYXJ0KGlkKSB7CiAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3JlbW92ZUl0ZW0nLCBpZCk7CiAgfTsKCiAgcmV0dXJuIHsKICAgIHN1Y2Nlc3M6IHN1Y2Nlc3MsCiAgICBwcm9kdWN0czogcHJvZHVjdHMsCiAgICBwcm9kdWN0OiBwcm9kdWN0LAogICAgc2V0UHJvZHVjdHM6IHNldFByb2R1Y3RzLAogICAgc2V0UHJvZHVjdDogc2V0UHJvZHVjdCwKICAgIGNyZWF0ZVByb2R1Y3Q6IGNyZWF0ZVByb2R1Y3QsCiAgICB1cGRhdGVQcm9kdWN0OiB1cGRhdGVQcm9kdWN0LAogICAgZGVsZXRlUHJvZHVjdDogZGVsZXRlUHJvZHVjdCwKICAgIGFkZFRvQ2FydDogYWRkVG9DYXJ0LAogICAgcmVtb3ZlRnJvbUNhcnQ6IHJlbW92ZUZyb21DYXJ0LAogICAgaXNMb2FkaW5nOiBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzWyd1dGlscy9pc0xvYWRpbmcnXTsKICAgIH0pLAogICAgZXJyb3I6IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLmdldHRlcnNbJ3V0aWxzL2dldEVycm9yJ107CiAgICB9KQogIH07Cn0="},{"version":3,"sources":["/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/composables/useProducts.js"],"names":["computed","ref","useRoute","useRouter","useStore","useProducts","store","route","router","success","products","getters","product","setProducts","dispatch","setProduct","params","id","createProduct","productId","push","updateProduct","value","deleteProduct","window","confirm","addToCart","qty","quantity","Number","name","removeFromCart","isLoading","error"],"mappings":"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","sourcesContent":["import { computed, ref } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useStore } from 'vuex'\n\nexport default function useProducts() {\n    const store = useStore()\n    const route = useRoute()\n    const router = useRouter()\n\n    const success = ref(false)\n    const products = computed(() => store.getters['getAllProducts'])\n    const product = computed(() => store.getters['getSingleProduct'])\n\n    /**\n     * Product CRUD\n     */\n    const setProducts = () => store.dispatch('fetchAllProducts')\n    const setProduct = () => store.dispatch('fetchSingleProduct', route.params.id)\n    const createProduct = async () => {\n        const productId = await store.dispatch('createProduct')\n        \n        if (productId) router.push(`/admin/products/${productId}`)\n    }\n    const updateProduct = async product => {\n        success.value = await store.dispatch('updateProduct', product)\n    }\n    const deleteProduct = productId => {\n        if (window.confirm(`Do you really want to remove the product ${productId}`)) store.dispatch('deleteProduct', productId)\n    }\n    \n    /**\n     * Add and Remove product from cart\n     */\n    const addToCart = (id, qty = 1) => {\n        store.dispatch('addItem', {\n            id,\n            quantity: Number(qty)\n        })\n        router.push({ name: 'cart' })\n    }\n    const removeFromCart = id => store.dispatch('removeItem', id)\n\n    return {\n        success,\n        products,\n        product,\n\n        setProducts,\n        setProduct,\n        createProduct,\n        updateProduct,\n        deleteProduct,\n\n        addToCart,\n        removeFromCart,\n\n        isLoading: computed(() => store.getters['utils/isLoading']),\n        error: computed(() => store.getters['utils/getError'])\n    }\n}"]}]}