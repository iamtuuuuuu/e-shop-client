{"remainingRequest":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/babel-loader/lib/index.js!/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/composables/useOrders.js","dependencies":[{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/composables/useOrders.js","mtime":1623291641436},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3Z1YW5odHUvRGVza3RvcC93b3Jrc3BhY2UvdnVlL2VzaG9wL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBjb21wdXRlZCwgcmVmIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgdXNlUm91dGUsIHVzZVJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VPcmRlcnMoKSB7CiAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICB2YXIgcm91dGUgPSB1c2VSb3V0ZSgpOwogIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICB2YXIgc3VjY2VzcyA9IHJlZihmYWxzZSk7CiAgdmFyIG9yZGVycyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzWydnZXRBbGxPcmRlcnMnXTsKICB9KTsKICB2YXIgb3JkZXIgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gc3RvcmUuZ2V0dGVyc1snZ2V0U2luZ2xlT3JkZXInXTsKICB9KTsKCiAgdmFyIGZldGNoQWxsT3JkZXJzID0gZnVuY3Rpb24gZmV0Y2hBbGxPcmRlcnMoKSB7CiAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ2ZldGNoQWxsT3JkZXJzJyk7CiAgfTsKCiAgdmFyIGZldGNoTXlPcmRlcnMgPSBmdW5jdGlvbiBmZXRjaE15T3JkZXJzKCkgewogICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdmZXRjaE15T3JkZXJzJyk7CiAgfTsKCiAgdmFyIGZldGNoVXNlck9yZGVycyA9IGZ1bmN0aW9uIGZldGNoVXNlck9yZGVycyh1c2VySWQpIHsKICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnZmV0Y2hVc2VyT3JkZXJzJywgdXNlcklkKTsKICB9OwoKICB2YXIgZmV0Y2hTaW5nbGVPcmRlciA9IGZ1bmN0aW9uIGZldGNoU2luZ2xlT3JkZXIob3JkZXJJZCkgewogICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdmZXRjaFNpbmdsZU9yZGVyJywgb3JkZXJJZCk7CiAgfTsKCiAgdmFyIHNldE9yZGVyID0gZnVuY3Rpb24gc2V0T3JkZXIoKSB7CiAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ2ZldGNoU2luZ2xlT3JkZXInLCByb3V0ZS5wYXJhbXMuaWQpOwogIH07CgogIHZhciBkZWxldGVPcmRlciA9IGZ1bmN0aW9uIGRlbGV0ZU9yZGVyKG9yZGVySWQpIHsKICAgIGlmICh3aW5kb3cuY29uZmlybSgiRG8geW91IHJlYWxseSB3YW50IHRvIHJlbW92ZSB0aGUgcHJvZHVjdCAiLmNvbmNhdChvcmRlcklkKSkpIHN0b3JlLmRpc3BhdGNoKCdkZWxldGVPcmRlcicsIG9yZGVySWQpOwogIH07CgogIHZhciB1cGRhdGVPcmRlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShvcmRlcikgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCd1cGRhdGVPcmRlclN0YXR1cycsIG9yZGVyKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBzdWNjZXNzLnZhbHVlID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZU9yZGVyKF94KSB7CiAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIHBsYWNlT3JkZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihwaG9uZSkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ2NyZWF0ZU9yZGVyJywgcGhvbmUpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGlmICghX2NvbnRleHQyLnNlbnQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogJ29yZGVycy5zaG93JywKICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICBpZDogb3JkZXIudmFsdWUuX2lkCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIHBsYWNlT3JkZXIoX3gyKSB7CiAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIHJldHVybiB7CiAgICBzdWNjZXNzOiBzdWNjZXNzLAogICAgb3JkZXJzOiBvcmRlcnMsCiAgICBvcmRlcjogb3JkZXIsCiAgICBmZXRjaEFsbE9yZGVyczogZmV0Y2hBbGxPcmRlcnMsCiAgICBmZXRjaE15T3JkZXJzOiBmZXRjaE15T3JkZXJzLAogICAgZmV0Y2hVc2VyT3JkZXJzOiBmZXRjaFVzZXJPcmRlcnMsCiAgICBmZXRjaFNpbmdsZU9yZGVyOiBmZXRjaFNpbmdsZU9yZGVyLAogICAgc2V0T3JkZXI6IHNldE9yZGVyLAogICAgZGVsZXRlT3JkZXI6IGRlbGV0ZU9yZGVyLAogICAgdXBkYXRlT3JkZXI6IHVwZGF0ZU9yZGVyLAogICAgcGxhY2VPcmRlcjogcGxhY2VPcmRlciwKICAgIGlzTG9hZGluZzogY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuZ2V0dGVyc1sndXRpbHMvaXNMb2FkaW5nJ107CiAgICB9KSwKICAgIGVycm9yOiBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzWyd1dGlscy9nZXRFcnJvciddOwogICAgfSkKICB9Owp9"},{"version":3,"sources":["/home/vuanhtu/Desktop/workspace/vue/eshop/frontend/src/composables/useOrders.js"],"names":["computed","ref","useStore","useRoute","useRouter","useOrders","store","route","router","success","orders","getters","order","fetchAllOrders","dispatch","fetchMyOrders","fetchUserOrders","userId","fetchSingleOrder","orderId","setOrder","params","id","deleteOrder","window","confirm","updateOrder","value","placeOrder","phone","push","name","_id","isLoading","error"],"mappings":"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","sourcesContent":["import { computed, ref } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRoute, useRouter } from 'vue-router'\n\nexport default function useOrders() {\n    const store = useStore()\n    const route = useRoute()\n    const router = useRouter()\n\n    const success = ref(false)\n    const orders = computed(() => store.getters['getAllOrders'])\n    const order = computed(() => store.getters['getSingleOrder'])\n\n    const fetchAllOrders = () => store.dispatch('fetchAllOrders')\n    const fetchMyOrders = () => store.dispatch('fetchMyOrders')\n    const fetchUserOrders = userId => store.dispatch('fetchUserOrders', userId)\n    const fetchSingleOrder = orderId => store.dispatch('fetchSingleOrder', orderId)\n    const setOrder = () => store.dispatch('fetchSingleOrder', route.params.id)\n\n    const deleteOrder = orderId => {\n        if (window.confirm(`Do you really want to remove the product ${orderId}`))\n            store.dispatch('deleteOrder', orderId)\n    }\n\n    const updateOrder = async order => {\n        success.value = await store.dispatch('updateOrderStatus', order)\n    }\n\n    const placeOrder = async phone => {\n        if (await store.dispatch('createOrder', phone)) router.push({ name: 'orders.show', params: { id: order.value._id } })\n    }\n\n\n    return {\n        success,\n        orders,\n        order,\n\n        fetchAllOrders,\n        fetchMyOrders,\n        fetchUserOrders,\n        fetchSingleOrder,\n        setOrder,\n        deleteOrder,\n        updateOrder,\n        placeOrder,\n\n        isLoading: computed(() => store.getters['utils/isLoading']),\n        error: computed(() => store.getters['utils/getError'])\n    }\n}\n"]}]}