{"remainingRequest":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/babel-loader/lib/index.js!/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/src/router/index.js","dependencies":[{"path":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/src/router/index.js","mtime":1621152090012},{"path":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvaG9tZS92dWFuaHR1L0Rlc2t0b3Avd29ya3NwYWNlL25vZGVqcy9NRVZOL3Byb3Nob3AvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCB7IGNyZWF0ZVJvdXRlciwgY3JlYXRlV2ViSGlzdG9yeSB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgc3RvcmUgZnJvbSAnLi4vc3RvcmUnOwppbXBvcnQgYWRtaW4gZnJvbSAnLi9yb3V0ZXMvYWRtaW4nOwppbXBvcnQgY2FydCBmcm9tICcuL3JvdXRlcy9jYXJ0JzsKaW1wb3J0IHVzZXJzIGZyb20gJy4vcm91dGVzL3VzZXJzJzsKdmFyIHJvdXRlcyA9IFt7CiAgcGF0aDogJy8nLAogIG5hbWU6ICdob21lJywKICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgIHJldHVybiBpbXBvcnQoCiAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiAiaG9tZS12aWV3IiAqLwogICAgJ0Avdmlld3MvSG9tZS52dWUnKTsKICB9Cn0sIHsKICBwYXRoOiAnL3Byb2R1Y3RzLzppZCcsCiAgbmFtZTogJ3Byb2R1Y3RzLnNob3cnLAogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgKICAgIC8qIHdlYnBhY2tDaHVua05hbWU6ICJwcm9kdWN0LXZpZXciICovCiAgICAnQC92aWV3cy9Qcm9kdWN0LnZ1ZScpOwogIH0KfSwgLy8gT3JkZXJzCnsKICBwYXRoOiAnL29yZGVycy86aWQnLAogIG5hbWU6ICdvcmRlcnMuc2hvdycsCiAgbWV0YTogewogICAgcmVxdWlyZXNBdXRoOiB0cnVlCiAgfSwKICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgIHJldHVybiBpbXBvcnQoCiAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiAib3JkZXItZGV0YWlscy12aWV3IiAqLwogICAgJ0Avdmlld3MvT3JkZXJzL09yZGVyRGV0YWlscy52dWUnKTsKICB9Cn1dLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoY2FydCksIF90b0NvbnN1bWFibGVBcnJheSh1c2VycyksIF90b0NvbnN1bWFibGVBcnJheShhZG1pbikpOwp2YXIgcm91dGVyID0gY3JlYXRlUm91dGVyKHsKICBoaXN0b3J5OiBjcmVhdGVXZWJIaXN0b3J5KHByb2Nlc3MuZW52LkJBU0VfVVJMKSwKICByb3V0ZXM6IHJvdXRlcywKICBzY3JvbGxCZWhhdmlvcjogZnVuY3Rpb24gc2Nyb2xsQmVoYXZpb3IoKSB7CiAgICByZXR1cm4gewogICAgICBsZWZ0OiAwLAogICAgICB0b3A6IDAKICAgIH07CiAgfQp9KTsgLy8gQ2hlY2tpbmcgZm9yIGxvZ2dlZCB1c2VyIGFuZCBmb3IgYWRtaW4gdXNlcgoKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBfLCBuZXh0KSB7CiAgdmFyIHVzZXIgPSBzdG9yZS5nZXR0ZXJzWydnZXRMb2dnZWRVc2VyJ107CiAgaWYgKHRvLm1hdGNoZWQuc29tZShmdW5jdGlvbiAocm91dGUpIHsKICAgIHJldHVybiByb3V0ZS5tZXRhLnJlcXVpcmVzQXV0aCA9PT0gdHJ1ZTsKICB9KSAmJiAhdXNlci5faWQpIG5leHQoewogICAgbmFtZTogJ2xvZ2luJywKICAgIHF1ZXJ5OiB7CiAgICAgIHJlZGlyZWN0OiB0by5mdWxsUGF0aC5zbGljZSgxKQogICAgfQogIH0pO2Vsc2UgaWYgKHRvLm1hdGNoZWQuc29tZShmdW5jdGlvbiAocm91dGUpIHsKICAgIHJldHVybiByb3V0ZS5tZXRhLnJlcXVpcmVzQXV0aCA9PT0gJ0FkbWluJzsKICB9KSAmJiAhdXNlci5pc0FkbWluKSBuZXh0KHsKICAgIG5hbWU6ICdIb21lJwogIH0pO2Vsc2UgbmV4dCgpOwp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/src/router/index.js"],"names":["createRouter","createWebHistory","store","admin","cart","users","routes","path","name","component","meta","requiresAuth","router","history","process","env","BASE_URL","scrollBehavior","left","top","beforeEach","to","_","next","user","getters","matched","some","route","_id","query","redirect","fullPath","slice","isAdmin"],"mappings":";;;;;;AAAA,SAASA,YAAT,EAAuBC,gBAAvB,QAA+C,YAA/C;AACA,OAAOC,KAAP,MAAkB,UAAlB;AAEA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AAEA,IAAMC,MAAM,IACR;AACIC,EAAAA,IAAI,EAAE,GADV;AAEIC,EAAAA,IAAI,EAAE,MAFV;AAGIC,EAAAA,SAAS,EAAE;AAAA,WAAM;AAAO;AAAoC,sBAA3C,CAAN;AAAA;AAHf,CADQ,EAMR;AACIF,EAAAA,IAAI,EAAE,eADV;AAEIC,EAAAA,IAAI,EAAE,eAFV;AAGIC,EAAAA,SAAS,EAAE;AAAA,WAAM;AAAO;AAAuC,yBAA9C,CAAN;AAAA;AAHf,CANQ,EAYR;AACA;AACIF,EAAAA,IAAI,EAAE,aADV;AAEIC,EAAAA,IAAI,EAAE,aAFV;AAGIE,EAAAA,IAAI,EAAE;AAAEC,IAAAA,YAAY,EAAE;AAAhB,GAHV;AAIIF,EAAAA,SAAS,EAAE;AAAA,WAAM;AAAO;AAA6C,qCAApD,CAAN;AAAA;AAJf,CAbQ,4BAoBLL,IApBK,sBAqBLC,KArBK,sBAsBLF,KAtBK,EAAZ;AAyBA,IAAMS,MAAM,GAAGZ,YAAY,CAAC;AACxBa,EAAAA,OAAO,EAAEZ,gBAAgB,CAACa,OAAO,CAACC,GAAR,CAAYC,QAAb,CADD;AAExBV,EAAAA,MAAM,EAANA,MAFwB;AAGxBW,EAAAA,cAAc,EAAE;AAAA,WAAO;AAAEC,MAAAA,IAAI,EAAE,CAAR;AAAWC,MAAAA,GAAG,EAAE;AAAhB,KAAP;AAAA;AAHQ,CAAD,CAA3B,C,CAMA;;AACAP,MAAM,CAACQ,UAAP,CAAkB,UAACC,EAAD,EAAKC,CAAL,EAAQC,IAAR,EAAiB;AAC/B,MAAMC,IAAI,GAAItB,KAAK,CAACuB,OAAN,CAAc,eAAd,CAAd;AAEA,MAAIJ,EAAE,CAACK,OAAH,CAAWC,IAAX,CAAgB,UAAAC,KAAK;AAAA,WAAIA,KAAK,CAAClB,IAAN,CAAWC,YAAX,KAA4B,IAAhC;AAAA,GAArB,KAA8D,CAACa,IAAI,CAACK,GAAxE,EACIN,IAAI,CAAC;AAAEf,IAAAA,IAAI,EAAE,OAAR;AAAiBsB,IAAAA,KAAK,EAAE;AAAEC,MAAAA,QAAQ,EAAEV,EAAE,CAACW,QAAH,CAAYC,KAAZ,CAAkB,CAAlB;AAAZ;AAAxB,GAAD,CAAJ,CADJ,KAGK,IAAIZ,EAAE,CAACK,OAAH,CAAWC,IAAX,CAAgB,UAAAC,KAAK;AAAA,WAAIA,KAAK,CAAClB,IAAN,CAAWC,YAAX,KAA4B,OAAhC;AAAA,GAArB,KAAiE,CAACa,IAAI,CAACU,OAA3E,EAAoFX,IAAI,CAAC;AAAEf,IAAAA,IAAI,EAAE;AAAR,GAAD,CAAJ,CAApF,KAEAe,IAAI;AACZ,CATD;AAWA,eAAeX,MAAf","sourcesContent":["import { createRouter, createWebHistory } from 'vue-router'\nimport store from '../store'\n\nimport admin from './routes/admin'\nimport cart from './routes/cart'\nimport users from './routes/users'\n\nconst routes = [\n    {\n        path: '/',\n        name: 'home',\n        component: () => import(/* webpackChunkName: \"home-view\" */ '@/views/Home.vue')\n    },\n    {\n        path: '/products/:id',\n        name: 'products.show',\n        component: () => import(/* webpackChunkName: \"product-view\" */ '@/views/Product.vue')\n    },\n    \n    // Orders\n    {\n        path: '/orders/:id',\n        name: 'orders.show',\n        meta: { requiresAuth: true },\n        component: () => import(/* webpackChunkName: \"order-details-view\" */ '@/views/Orders/OrderDetails.vue')\n    },\n\n    ...cart,\n    ...users,\n    ...admin,\n]\n\nconst router = createRouter({\n    history: createWebHistory(process.env.BASE_URL),\n    routes,\n    scrollBehavior: () => ({ left: 0, top: 0 })\n})\n\n// Checking for logged user and for admin user\nrouter.beforeEach((to, _, next) => {\n    const user = (store.getters['getLoggedUser'])\n    \n    if (to.matched.some(route => route.meta.requiresAuth === true) && !user._id)\n        next({ name: 'login', query: { redirect: to.fullPath.slice(1) } })\n    \n    else if (to.matched.some(route => route.meta.requiresAuth === 'Admin') && !user.isAdmin) next({ name: 'Home' })\n\n    else next()\n})\n\nexport default router\n"]}]}