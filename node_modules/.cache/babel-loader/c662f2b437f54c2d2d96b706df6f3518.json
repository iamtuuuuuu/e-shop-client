{"remainingRequest":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/babel-loader/lib/index.js!/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/src/composables/useOrders.js","dependencies":[{"path":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/src/composables/useOrders.js","mtime":1621152090012},{"path":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3Z1YW5odHUvRGVza3RvcC93b3Jrc3BhY2Uvbm9kZWpzL01FVk4vcHJvc2hvcC9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICd2dWUtcm91dGVyJzsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlT3JkZXJzKCkgewogIHZhciBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgdmFyIHJvdXRlciA9IHVzZVJvdXRlcigpOwogIHZhciBvcmRlcnMgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gc3RvcmUuZ2V0dGVyc1snZ2V0QWxsT3JkZXJzJ107CiAgfSk7CiAgdmFyIG9yZGVyID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHN0b3JlLmdldHRlcnNbJ2dldFNpbmdsZU9yZGVyJ107CiAgfSk7CgogIHZhciBmZXRjaEFsbE9yZGVycyA9IGZ1bmN0aW9uIGZldGNoQWxsT3JkZXJzKCkgewogICAgdmFyIHVzZXJJZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkOwogICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdmZXRjaEFsbE9yZGVycycsIHVzZXJJZCk7CiAgfTsKCiAgdmFyIGZldGNoTXlPcmRlcnMgPSBmdW5jdGlvbiBmZXRjaE15T3JkZXJzKCkgewogICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdmZXRjaE15T3JkZXJzJyk7CiAgfTsKCiAgdmFyIGZldGNoU2luZ2xlT3JkZXIgPSBmdW5jdGlvbiBmZXRjaFNpbmdsZU9yZGVyKG9yZGVySWQpIHsKICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnZmV0Y2hTaW5nbGVPcmRlcicsIG9yZGVySWQpOwogIH07CgogIHZhciBwbGFjZU9yZGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGNhcnRTdW1tYXJ5KSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ2NyZWF0ZU9yZGVyJywgY2FydFN1bW1hcnkpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGlmICghX2NvbnRleHQuc2VudCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6ICdvcmRlcnMuc2hvdycsCiAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgaWQ6IG9yZGVyLnZhbHVlLl9pZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gcGxhY2VPcmRlcihfeCkgewogICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIHZhciBwYXlPcmRlciA9IGZ1bmN0aW9uIHBheU9yZGVyKG9yZGVySWQsIGRldGFpbHMpIHsKICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgncGF5T3JkZXInLCB7CiAgICAgIG9yZGVySWQ6IG9yZGVySWQsCiAgICAgIGRldGFpbHM6IGRldGFpbHMKICAgIH0pOwogIH07CgogIHZhciBmZXRjaFBheXBhbENsaWVudElkID0gZnVuY3Rpb24gZmV0Y2hQYXlwYWxDbGllbnRJZCgpIHsKICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgncGF5cGFsQ2xpZW50SWQnKTsKICB9OwoKICByZXR1cm4gewogICAgb3JkZXJzOiBvcmRlcnMsCiAgICBvcmRlcjogb3JkZXIsCiAgICBmZXRjaEFsbE9yZGVyczogZmV0Y2hBbGxPcmRlcnMsCiAgICBmZXRjaE15T3JkZXJzOiBmZXRjaE15T3JkZXJzLAogICAgZmV0Y2hTaW5nbGVPcmRlcjogZmV0Y2hTaW5nbGVPcmRlciwKICAgIHBsYWNlT3JkZXI6IHBsYWNlT3JkZXIsCiAgICBwYXlPcmRlcjogcGF5T3JkZXIsCiAgICBmZXRjaFBheXBhbENsaWVudElkOiBmZXRjaFBheXBhbENsaWVudElkLAogICAgaXNMb2FkaW5nOiBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzWyd1dGlscy9pc0xvYWRpbmcnXTsKICAgIH0pLAogICAgZXJyb3I6IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHN0b3JlLmdldHRlcnNbJ3V0aWxzL2dldEVycm9yJ107CiAgICB9KQogIH07Cn0="},{"version":3,"sources":["/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/src/composables/useOrders.js"],"names":["computed","useStore","useRouter","useOrders","store","router","orders","getters","order","fetchAllOrders","userId","undefined","dispatch","fetchMyOrders","fetchSingleOrder","orderId","placeOrder","cartSummary","push","name","params","id","value","_id","payOrder","details","fetchPaypalClientId","isLoading","error"],"mappings":";;AAAA,SAASA,QAAT,QAAyB,KAAzB;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,SAASC,SAAT,QAA0B,YAA1B;AAEA,eAAe,SAASC,SAAT,GAAqB;AAChC,MAAMC,KAAK,GAAGH,QAAQ,EAAtB;AACA,MAAMI,MAAM,GAAGH,SAAS,EAAxB;AAEA,MAAMI,MAAM,GAAGN,QAAQ,CAAC;AAAA,WAAMI,KAAK,CAACG,OAAN,CAAc,cAAd,CAAN;AAAA,GAAD,CAAvB;AACA,MAAMC,KAAK,GAAGR,QAAQ,CAAC;AAAA,WAAMI,KAAK,CAACG,OAAN,CAAc,gBAAd,CAAN;AAAA,GAAD,CAAtB;;AAEA,MAAME,cAAc,GAAG,SAAjBA,cAAiB;AAAA,QAACC,MAAD,uEAAUC,SAAV;AAAA,WAAwBP,KAAK,CAACQ,QAAN,CAAe,gBAAf,EAAiCF,MAAjC,CAAxB;AAAA,GAAvB;;AACA,MAAMG,aAAa,GAAG,SAAhBA,aAAgB;AAAA,WAAMT,KAAK,CAACQ,QAAN,CAAe,eAAf,CAAN;AAAA,GAAtB;;AACA,MAAME,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAC,OAAO;AAAA,WAAIX,KAAK,CAACQ,QAAN,CAAe,kBAAf,EAAmCG,OAAnC,CAAJ;AAAA,GAAhC;;AAEA,MAAMC,UAAU;AAAA,uEAAG,iBAAMC,WAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACLb,KAAK,CAACQ,QAAN,CAAe,aAAf,EAA8BK,WAA9B,CADK;;AAAA;AAAA;AAAA;AAAA;AAAA;;AACuCZ,cAAAA,MAAM,CAACa,IAAP,CAAY;AAAEC,gBAAAA,IAAI,EAAE,aAAR;AAAuBC,gBAAAA,MAAM,EAAE;AAAEC,kBAAAA,EAAE,EAAEb,KAAK,CAACc,KAAN,CAAYC;AAAlB;AAA/B,eAAZ;;AADvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAVP,UAAU;AAAA;AAAA;AAAA,KAAhB;;AAIA,MAAMQ,QAAQ,GAAG,SAAXA,QAAW,CAACT,OAAD,EAAUU,OAAV;AAAA,WAAsBrB,KAAK,CAACQ,QAAN,CAAe,UAAf,EAA2B;AAAEG,MAAAA,OAAO,EAAPA,OAAF;AAAWU,MAAAA,OAAO,EAAPA;AAAX,KAA3B,CAAtB;AAAA,GAAjB;;AACA,MAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB;AAAA,WAAMtB,KAAK,CAACQ,QAAN,CAAe,gBAAf,CAAN;AAAA,GAA5B;;AAGA,SAAO;AACHN,IAAAA,MAAM,EAANA,MADG;AAEHE,IAAAA,KAAK,EAALA,KAFG;AAIHC,IAAAA,cAAc,EAAdA,cAJG;AAKHI,IAAAA,aAAa,EAAbA,aALG;AAMHC,IAAAA,gBAAgB,EAAhBA,gBANG;AAOHE,IAAAA,UAAU,EAAVA,UAPG;AAQHQ,IAAAA,QAAQ,EAARA,QARG;AASHE,IAAAA,mBAAmB,EAAnBA,mBATG;AAWHC,IAAAA,SAAS,EAAE3B,QAAQ,CAAC;AAAA,aAAMI,KAAK,CAACG,OAAN,CAAc,iBAAd,CAAN;AAAA,KAAD,CAXhB;AAYHqB,IAAAA,KAAK,EAAE5B,QAAQ,CAAC;AAAA,aAAMI,KAAK,CAACG,OAAN,CAAc,gBAAd,CAAN;AAAA,KAAD;AAZZ,GAAP;AAcH","sourcesContent":["import { computed } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\n\nexport default function useOrders() {\n    const store = useStore()\n    const router = useRouter()\n\n    const orders = computed(() => store.getters['getAllOrders'])\n    const order = computed(() => store.getters['getSingleOrder'])\n\n    const fetchAllOrders = (userId = undefined) => store.dispatch('fetchAllOrders', userId)\n    const fetchMyOrders = () => store.dispatch('fetchMyOrders')\n    const fetchSingleOrder = orderId => store.dispatch('fetchSingleOrder', orderId)\n    \n    const placeOrder = async cartSummary => {\n        if (await store.dispatch('createOrder', cartSummary)) router.push({ name: 'orders.show', params: { id: order.value._id }})\n    }\n    \n    const payOrder = (orderId, details) => store.dispatch('payOrder', { orderId, details })\n    const fetchPaypalClientId = () => store.dispatch('paypalClientId')\n\n    \n    return {\n        orders,\n        order,\n\n        fetchAllOrders,\n        fetchMyOrders,\n        fetchSingleOrder,\n        placeOrder,\n        payOrder,\n        fetchPaypalClientId,\n\n        isLoading: computed(() => store.getters['utils/isLoading']),\n        error: computed(() => store.getters['utils/getError'])\n    }\n}\n"]}]}