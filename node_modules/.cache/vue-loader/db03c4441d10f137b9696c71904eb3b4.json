{"remainingRequest":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/src/views/Users/Profile.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/src/views/Users/Profile.vue","mtime":1621152090016},{"path":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGRlZmluZUFzeW5jQ29tcG9uZW50LCByZWYgfSBmcm9tICd2dWUnCmltcG9ydCBWRm9ybUlucHV0IGZyb20gJ0AvY29tcG9uZW50cy9WRm9ybUlucHV0JwoKaW1wb3J0IHVzZVVzZXJzRGV0YWlscyBmcm9tICdAL2NvbXBvc2FibGVzL3VzZVVzZXJzRGV0YWlscycKaW1wb3J0IHVzZU9yZGVycyBmcm9tICdAL2NvbXBvc2FibGVzL3VzZU9yZGVycycKCmltcG9ydCBkYXlqcyBmcm9tICdkYXlqcycKaW1wb3J0IGxvY2FsaXplZEZvcm1hdCBmcm9tICdkYXlqcy9wbHVnaW4vbG9jYWxpemVkRm9ybWF0JwpkYXlqcy5leHRlbmQobG9jYWxpemVkRm9ybWF0KQoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ1Byb2ZpbGUnLAogICAgY29tcG9uZW50czogewogICAgICAgIFZGb3JtSW5wdXQsCiAgICAgICAgVkxvYWRlcjogZGVmaW5lQXN5bmNDb21wb25lbnQoKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6ICJsb2FkZXItY29tcG9uZW50IiAqLyAnQC9jb21wb25lbnRzL3V0aWxzL1ZMb2FkZXInKSksCiAgICAgICAgVkFsZXJ0OiBkZWZpbmVBc3luY0NvbXBvbmVudCgoKSA9PiBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogIm1lc3NhZ2UtY29tcG9uZW50IiAqLyAnQC9jb21wb25lbnRzL3V0aWxzL1ZBbGVydCcpKQogICAgfSwKICAgIHNldHVwKCkgewogICAgICAgIGNvbnN0IHsgc3VjY2VzcywgdXNlckRldGFpbHMsIGZldGNoVXNlckRldGFpbHMgLCB1cGRhdGVVc2VyUHJvZmlsZSwgaXNMb2FkaW5nLCBlcnJvciB9ID0gdXNlVXNlcnNEZXRhaWxzKCkKICAgICAgICBjb25zdCB7IG9yZGVycywgZmV0Y2hNeU9yZGVycyB9ID0gdXNlT3JkZXJzKCkKICAgICAgICAKICAgICAgICBmZXRjaFVzZXJEZXRhaWxzKCkKICAgICAgICBmZXRjaE15T3JkZXJzKCkKCiAgICAgICAgY29uc3QgdXNlciA9IHJlZih1c2VyRGV0YWlscy52YWx1ZSkKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgc3VjY2VzcywKICAgICAgICAgICAgdXNlciwKICAgICAgICAgICAgb3JkZXJzLAogICAgICAgICAgICB1cGRhdGVVc2VyUHJvZmlsZSwKICAgICAgICAgICAgZGF5anMsCiAgICAgICAgICAgIGlzTG9hZGluZywKICAgICAgICAgICAgZXJyb3IKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/src/views/Users/Profile.vue"],"names":[],"mappings":";AA6GA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAC9C,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;AAE/C,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1D,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;AAE9C,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACxB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACzD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;AAE5B,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACX,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACpH,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACtH,CAAC;IACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACJ,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACzG,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;QAE5C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;QAEd,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;QAElC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;YACH,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC,CAAC;YACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACN,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACjB,CAAC,CAAC,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACT,CAAC,CAAC,CAAC,CAAC;QACR;IACJ;AACJ","file":"/home/vuanhtu/Desktop/workspace/nodejs/MEVN/proshop/frontend/src/views/Users/Profile.vue","sourceRoot":"","sourcesContent":["<template>\n<div id=\"profile\" class=\"container-lg container-fluid\">\n    <v-loader v-if=\"isLoading\" />\n\n    <v-alert v-else-if=\"error.message\">\n        {{ error.message }}\n    </v-alert>\n\n    <div class=\"row\">\n        <div class=\"col-lg-3\">\n            <h2 class=\"mb-3\">User Profile</h2>\n\n            <v-alert v-if=\"success\" type=\"alert-success\">\n                Profile updated\n            </v-alert>\n\n            <form @submit.prevent=\"updateUserProfile(user)\">\n                <v-form-input\n                    v-model=\"user.name\"\n                    inputId=\"name\"\n                    label=\"Name\"\n                    :errors=\"error.errors ? error.errors.name : undefined\"\n                />\n                <v-form-input\n                    v-model=\"user.email\"\n                    inputId=\"email\"\n                    label=\"Email Address\"\n                    :errors=\"error.errors ? error.errors.email : undefined\"\n                />\n                <v-form-input\n                    v-model=\"user.password\"\n                    inputId=\"password\"\n                    label=\"Password\"\n                    type=\"password\"\n                    :errors=\"error.errors ? error.errors.password : undefined\"\n                />\n                <v-form-input\n                    v-model=\"user.confirmPassword\"\n                    inputId=\"confirmPassword\"\n                    label=\"Confirm Password\"\n                    type=\"password\"\n                />\n\n                <button type=\"submit\" class=\"btn btn-dark btn-block\">\n                    Update\n                </button>\n            </form>\n        </div>\n        <div class=\"col-lg-9 mt-lg-0 mt-4\">\n            <h2 class=\"mb-3\">My Orders</h2>\n\n            <v-alert type=\"alert-info\" v-if=\"orders.length === 0\">\n                You don't have any order yet.\n            </v-alert>\n            \n            <div class=\"table-responsive\" v-else>\n                <table class=\"table table-hover table-sm\">\n                    <thead>\n                        <tr>\n                            <th>Id</th>\n                            <th class=\"min-width\">Date</th>\n                            <th>Total</th>\n                            <th class=\"min-width\">Paid</th>\n                            <th :class=\"{'min-width': orders.some(order => order.isDelivered)}\">Delivered</th>\n                            <th></th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr v-for=\"order in orders\" :key=\"order._id\">\n                            <td>{{ order._id }}</td>\n                            <td>{{ dayjs(order.createdAt).format('lll') }}</td>\n                            <td>\n                                {{\n                                    new Intl.NumberFormat('en-US', {\n                                        style: 'currency',\n                                        currency: 'USD'\n                                    }).format(order.totalPrice)\n                                }}\n                            </td>\n                            <td>\n                                <span v-if=\"order.isPaid\">\n                                    {{ dayjs(order.paidAt).format('lll') }}\n                                </span>\n                                <font-awesome-icon :icon=\"['fas', 'times']\" v-else />\n                            </td>\n                            <td>\n                                <span v-if=\"order.isDelivered\">\n                                    {{ dayjs(order.deliveredAt).format('lll') }}\n                                </span>\n                                <font-awesome-icon :icon=\"['fas', 'times']\" v-else />\n                            </td>\n                            <td>\n                                <router-link\n                                    :to=\"{ name: 'orders.show', params: { id: order._id }}\"\n                                    class=\"btn btn-link btn-sm\"\n                                >\n                                    <font-awesome-icon :icon=\"['fas', 'info-circle']\" />\n                                </router-link>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n</template>\n\n<script>\nimport { defineAsyncComponent, ref } from 'vue'\nimport VFormInput from '@/components/VFormInput'\n\nimport useUsersDetails from '@/composables/useUsersDetails'\nimport useOrders from '@/composables/useOrders'\n\nimport dayjs from 'dayjs'\nimport localizedFormat from 'dayjs/plugin/localizedFormat'\ndayjs.extend(localizedFormat)\n\nexport default {\n    name: 'Profile',\n    components: {\n        VFormInput,\n        VLoader: defineAsyncComponent(() => import(/* webpackChunkName: \"loader-component\" */ '@/components/utils/VLoader')),\n        VAlert: defineAsyncComponent(() => import(/* webpackChunkName: \"message-component\" */ '@/components/utils/VAlert'))\n    },\n    setup() {\n        const { success, userDetails, fetchUserDetails , updateUserProfile, isLoading, error } = useUsersDetails()\n        const { orders, fetchMyOrders } = useOrders()\n        \n        fetchUserDetails()\n        fetchMyOrders()\n\n        const user = ref(userDetails.value)\n\n        return {\n            success,\n            user,\n            orders,\n            updateUserProfile,\n            dayjs,\n            isLoading,\n            error\n        }\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\ntable {\n    thead tr th,\n    tbody tr td {\n        text-align: center;\n        vertical-align: middle;\n\n        svg {\n            &.fa-times { color: var(--danger) }\n        }\n    }\n}\n\n@media (max-width: 991px) {\n    form {\n        max-width: 50%;\n        margin: 0 auto;\n    }\n    \n    table thead tr th.min-width {\n        min-width: 11.5rem\n    }\n}\n\n@media (max-width: 767px) {\n    #profile {\n        > .row {\n            margin: 0;\n        \n            > div { padding: 0; }\n        }\n    }\n\n    form { max-width: 75% }\n}\n\n@media (max-width: 575px) {\n    form { max-width: unset }\n}\n</style>\n"]}]}