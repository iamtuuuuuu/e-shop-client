{"version":3,"sources":["webpack:///./src/views/Users/Profile.vue","webpack:///./src/views/Users/Profile.vue?d3bd","webpack:///./src/composables/useUsersDetails.js","webpack:///./src/views/Users/Profile.vue?ff24"],"names":["id","class","type","isLoading","error","message","success","updateUserProfile","user","name","inputId","label","errors","undefined","email","password","confirmPassword","orders","length","some","order","isDelivered","key","_id","dayjs","createdAt","format","Intl","NumberFormat","isPaid","paidAt","icon","deliveredAt","to","extend","components","VFormInput","VLoader","VAlert","setup","useUsersDetails","userDetails","fetchUserDetails","useOrders","fetchMyOrders","value","render","__scopeId","store","useStore","ref","users","computed","getters","fetchAllUsers","dispatch","commit","root","updateUserDetails","route","deleteUser","userId","window","confirm"],"mappings":"4NACKA,GAAG,UAAUC,MAAM,gC,GAOfA,MAAM,O,GACFA,MAAM,Y,EACP,eAAkC,MAA9BA,MAAM,QAAO,gBAAY,G,iBAEgB,qB,EA+BzC,eAES,UAFDC,KAAK,SAASD,MAAM,0BAAyB,YAErD,G,GAGHA,MAAM,yB,EACP,eAA+B,MAA3BA,MAAM,QAAO,aAAS,G,iBAE4B,mC,SAIjDA,MAAM,oB,GACAA,MAAM,8B,EAGD,eAAW,UAAP,MAAE,G,EACN,eAA+B,MAA3BA,MAAM,aAAY,QAAI,G,EAC1B,eAAc,UAAV,SAAK,G,EACT,eAA+B,MAA3BA,MAAM,aAAY,QAAI,G,EAE1B,eAAS,mB,gQA/DrC,eAwGM,MAxGN,EAwGM,CAvGc,EAAAE,W,iBAAhB,eAA6B,YAET,EAAAC,MAAMC,S,iBAA1B,eAEU,W,WADN,iBAAmB,C,8BAAhB,EAAAD,MAAMC,SAAO,O,6BAGpB,eAgGM,MAhGN,EAgGM,CA/FF,eAsCM,MAtCN,EAsCM,CArCF,EAEe,EAAAC,S,iBAAf,eAEU,G,MAFcJ,KAAK,iB,YAAgB,iBAE7C,C,mCAEA,eA8BO,QA9BA,SAAM,+CAAU,EAAAK,kBAAkB,EAAAC,QAAI,e,CACzC,eAKE,G,WAJW,EAAAA,KAAKC,K,qDAAL,EAAAD,KAAKC,KAAI,IAClBC,QAAQ,OACRC,MAAM,OACLC,OAAQ,EAAAR,MAAMQ,OAAS,EAAAR,MAAMQ,OAAOH,UAAOI,G,gCAEhD,eAKE,G,WAJW,EAAAL,KAAKM,M,qDAAL,EAAAN,KAAKM,MAAK,IACnBJ,QAAQ,QACRC,MAAM,gBACLC,OAAQ,EAAAR,MAAMQ,OAAS,EAAAR,MAAMQ,OAAOE,WAAQD,G,gCAEjD,eAME,G,WALW,EAAAL,KAAKO,S,qDAAL,EAAAP,KAAKO,SAAQ,IACtBL,QAAQ,WACRC,MAAM,WACNT,KAAK,WACJU,OAAQ,EAAAR,MAAMQ,OAAS,EAAAR,MAAMQ,OAAOG,cAAWF,G,gCAEpD,eAKE,G,WAJW,EAAAL,KAAKQ,gB,qDAAL,EAAAR,KAAKQ,gBAAe,IAC7BN,QAAQ,kBACRC,MAAM,mBACNT,KAAK,Y,uBAGT,G,MAKR,eAuDM,MAvDN,EAuDM,CAtDF,EAE8C,IAAb,EAAAe,OAAOC,Q,iBAAxC,eAEU,G,MAFDhB,KAAK,c,YAAwC,iBAEtD,C,+BAEA,eA+CM,MA/CN,EA+CM,CA9CF,eA6CQ,QA7CR,EA6CQ,CA5CJ,eASQ,cARJ,eAOK,WAND,EACA,EACA,EACA,EACA,eAAkF,MAA7ED,MAAK,aAAgB,EAAAgB,OAAOE,MAAK,SAAAC,GAAK,OAAIA,EAAMC,iBAAe,YAAS,GAC7E,MAGR,eAiCQ,e,mBAhCJ,eA+BK,2BA/Be,EAAAJ,QAAM,SAAfG,G,wBAAX,eA+BK,MA/BwBE,IAAKF,EAAMG,K,CACpC,eAAwB,yBAAjBH,EAAMG,KAAG,GAChB,eAAmD,yBAA5C,EAAAC,MAAMJ,EAAMK,WAAWC,OAAM,WACpC,eAOK,6BALOC,KAAKC,aAAY,S,kCAAsK,OAAO,EAAM,aAAU,GAM1N,eAKK,WAJWR,EAAMS,Q,iBAAlB,eAEO,wBADA,EAAAL,MAAMJ,EAAMU,QAAQJ,OAAM,a,iBAEjC,eAAqD,G,MAAjCK,KAAM,CAAC,MAAO,cAEtC,eAKK,WAJWX,EAAMC,a,iBAAlB,eAEO,wBADA,EAAAG,MAAMJ,EAAMY,aAAaN,OAAM,a,iBAEtC,eAAqD,G,MAAjCK,KAAM,CAAC,MAAO,cAEtC,eAOK,WAND,eAKc,GAJTE,GAAE,+BAAuCb,EAAMG,MAChDtB,MAAM,uB,YAEN,iBAAoD,CAApD,eAAoD,GAAhC8B,KAAM,CAAC,MAAO,qB,6JAqBtE,IAAMG,OAAO,KAEE,OACXzB,KAAM,UACN0B,WAAY,CACRC,aAAA,KACAC,QAAS,gBAAqB,kBAAM,qDACpCC,OAAQ,gBAAqB,kBAAM,uDAEvCC,MAPW,WAOH,MACqF,OAAAC,EAAA,QAAjFlC,EADJ,EACIA,QAASmC,EADb,EACaA,YAAaC,EAD1B,EAC0BA,iBAAmBnC,EAD7C,EAC6CA,kBAAmBJ,EADhE,EACgEA,UAAWC,EAD3E,EAC2EA,MAD3E,EAE8B,OAAAuC,EAAA,QAA1B1B,EAFJ,EAEIA,OAAQ2B,EAFZ,EAEYA,cAEhBF,IACAE,IAEA,IAAMpC,EAAO,eAAIiC,EAAYI,OAE7B,MAAO,CACHvC,UACAE,OACAS,SACAV,oBACAiB,MAAA,IACArB,YACAC,W,UCzIZ,EAAO0C,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,0HCLA,SAASP,IACpB,IAAMQ,EAAQC,iBAER3C,EAAU4C,gBAAI,GACdC,EAAQC,gBAAS,kBAAMJ,EAAMK,QAAQ,kBACrCZ,EAAcW,gBAAS,kBAAMJ,EAAMK,QAAQ,qBAE3CC,EAAgB,kBAAMN,EAAMO,SAAS,kBACrCb,EAAmB,eAAClC,EAAD,uDAAQ,UAAR,OAAsBwC,EAAMO,SAAS,mBAAoB/C,IAE5ED,EAAiB,yDAAG,WAAMC,GAAN,oFACtBA,EAAKO,WAAaP,EAAKQ,gBADD,gBAEhBgC,EAAMQ,OAAO,iBAAkB,CAAEnD,QAAS,wCAA0C,CAAEoD,MAAM,IAF5E,sCAGMT,EAAMO,SAAS,oBAAqB,CAAE/C,SAH5C,OAGhBF,EAAQuC,MAHQ,kDAAH,sDAKjBa,EAAiB,yDAAG,WAAMlD,GAAN,iGAAoCwC,EAAMO,SAAS,oBAAqB,CAAE/C,OAAMmD,MAAOnD,EAAKe,MAA5F,gCAAcjB,EAAQuC,MAAtB,mDAAH,sDAEjBe,EAAa,SAAAC,GACXC,OAAOC,QAAP,gDAAwDF,EAAxD,OAAoEb,EAAMO,SAAS,aAAcM,IAGzG,MAAO,CACHvD,UACA6C,QACAV,cAEAa,gBACAZ,mBACAnC,oBACAmD,oBACAE,aAEAzD,UAAWiD,gBAAS,kBAAMJ,EAAMK,QAAQ,sBACxCjD,MAAOgD,gBAAS,kBAAMJ,EAAMK,QAAQ,wB,oCCpC5C,W","file":"js/profile-view.f03fb0b8.js","sourcesContent":["<template>\n<div id=\"profile\" class=\"container-lg container-fluid\">\n    <v-loader v-if=\"isLoading\" />\n\n    <v-alert v-else-if=\"error.message\">\n        {{ error.message }}\n    </v-alert>\n\n    <div class=\"row\">\n        <div class=\"col-lg-3\">\n            <h2 class=\"mb-3\">User Profile</h2>\n\n            <v-alert v-if=\"success\" type=\"alert-success\">\n                Profile updated\n            </v-alert>\n\n            <form @submit.prevent=\"updateUserProfile(user)\">\n                <v-form-input\n                    v-model=\"user.name\"\n                    inputId=\"name\"\n                    label=\"Name\"\n                    :errors=\"error.errors ? error.errors.name : undefined\"\n                />\n                <v-form-input\n                    v-model=\"user.email\"\n                    inputId=\"email\"\n                    label=\"Email Address\"\n                    :errors=\"error.errors ? error.errors.email : undefined\"\n                />\n                <v-form-input\n                    v-model=\"user.password\"\n                    inputId=\"password\"\n                    label=\"Password\"\n                    type=\"password\"\n                    :errors=\"error.errors ? error.errors.password : undefined\"\n                />\n                <v-form-input\n                    v-model=\"user.confirmPassword\"\n                    inputId=\"confirmPassword\"\n                    label=\"Confirm Password\"\n                    type=\"password\"\n                />\n\n                <button type=\"submit\" class=\"btn btn-dark btn-block\">\n                    Update\n                </button>\n            </form>\n        </div>\n        <div class=\"col-lg-9 mt-lg-0 mt-4\">\n            <h2 class=\"mb-3\">My Orders</h2>\n\n            <v-alert type=\"alert-info\" v-if=\"orders.length === 0\">\n                You don't have any order yet.\n            </v-alert>\n            \n            <div class=\"table-responsive\" v-else>\n                <table class=\"table table-hover table-sm\">\n                    <thead>\n                        <tr>\n                            <th>Id</th>\n                            <th class=\"min-width\">Date</th>\n                            <th>Total</th>\n                            <th class=\"min-width\">Paid</th>\n                            <th :class=\"{'min-width': orders.some(order => order.isDelivered)}\">Delivered</th>\n                            <th></th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr v-for=\"order in orders\" :key=\"order._id\">\n                            <td>{{ order._id }}</td>\n                            <td>{{ dayjs(order.createdAt).format('lll') }}</td>\n                            <td>\n                                {{\n                                    new Intl.NumberFormat('en-US', {\n                                        style: 'currency',\n                                        currency: 'USD'\n                                    }).format(order.totalPrice)\n                                }}\n                            </td>\n                            <td>\n                                <span v-if=\"order.isPaid\">\n                                    {{ dayjs(order.paidAt).format('lll') }}\n                                </span>\n                                <font-awesome-icon :icon=\"['fas', 'times']\" v-else />\n                            </td>\n                            <td>\n                                <span v-if=\"order.isDelivered\">\n                                    {{ dayjs(order.deliveredAt).format('lll') }}\n                                </span>\n                                <font-awesome-icon :icon=\"['fas', 'times']\" v-else />\n                            </td>\n                            <td>\n                                <router-link\n                                    :to=\"{ name: 'orders.show', params: { id: order._id }}\"\n                                    class=\"btn btn-link btn-sm\"\n                                >\n                                    <font-awesome-icon :icon=\"['fas', 'info-circle']\" />\n                                </router-link>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n</template>\n\n<script>\nimport { defineAsyncComponent, ref } from 'vue'\nimport VFormInput from '@/components/VFormInput'\n\nimport useUsersDetails from '@/composables/useUsersDetails'\nimport useOrders from '@/composables/useOrders'\n\nimport dayjs from 'dayjs'\nimport localizedFormat from 'dayjs/plugin/localizedFormat'\ndayjs.extend(localizedFormat)\n\nexport default {\n    name: 'Profile',\n    components: {\n        VFormInput,\n        VLoader: defineAsyncComponent(() => import(/* webpackChunkName: \"loader-component\" */ '@/components/utils/VLoader')),\n        VAlert: defineAsyncComponent(() => import(/* webpackChunkName: \"message-component\" */ '@/components/utils/VAlert'))\n    },\n    setup() {\n        const { success, userDetails, fetchUserDetails , updateUserProfile, isLoading, error } = useUsersDetails()\n        const { orders, fetchMyOrders } = useOrders()\n        \n        fetchUserDetails()\n        fetchMyOrders()\n\n        const user = ref(userDetails.value)\n\n        return {\n            success,\n            user,\n            orders,\n            updateUserProfile,\n            dayjs,\n            isLoading,\n            error\n        }\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\ntable {\n    thead tr th,\n    tbody tr td {\n        text-align: center;\n        vertical-align: middle;\n\n        svg {\n            &.fa-times { color: var(--danger) }\n        }\n    }\n}\n\n@media (max-width: 991px) {\n    form {\n        max-width: 50%;\n        margin: 0 auto;\n    }\n    \n    table thead tr th.min-width {\n        min-width: 11.5rem\n    }\n}\n\n@media (max-width: 767px) {\n    #profile {\n        > .row {\n            margin: 0;\n        \n            > div { padding: 0; }\n        }\n    }\n\n    form { max-width: 75% }\n}\n\n@media (max-width: 575px) {\n    form { max-width: unset }\n}\n</style>\n","import { render } from \"./Profile.vue?vue&type=template&id=e32aacbe&scoped=true\"\nimport script from \"./Profile.vue?vue&type=script&lang=js\"\nexport * from \"./Profile.vue?vue&type=script&lang=js\"\n\nimport \"./Profile.vue?vue&type=style&index=0&id=e32aacbe&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-e32aacbe\"\n\nexport default script","import { computed, ref } from 'vue'\nimport { useStore } from 'vuex'\n\nexport default function useUsersDetails() {\n    const store = useStore()\n\n    const success = ref(false)\n    const users = computed(() => store.getters['getAllUsers'])\n    const userDetails = computed(() => store.getters['getUserDetails'])\n\n    const fetchAllUsers = () => store.dispatch('fetchAllUsers')\n    const fetchUserDetails = (user = 'profile') => store.dispatch('fetchUserDetails', user)\n\n    const updateUserProfile = async user => {\n        user.password !== user.confirmPassword\n            ? store.commit('utils/setError', { message: 'The password confirmation must match' }, { root: true })\n            : success.value = await store.dispatch('updateUserDetails', { user })\n    }\n    const updateUserDetails = async user => success.value = await store.dispatch('updateUserDetails', { user, route: user._id })\n\n    const deleteUser = userId => {\n        if (window.confirm(`Do you really want to remove the user ${userId}?`)) store.dispatch('deleteUser', userId)\n    }\n\n    return {\n        success,\n        users,\n        userDetails,\n        \n        fetchAllUsers,\n        fetchUserDetails,\n        updateUserProfile,\n        updateUserDetails,\n        deleteUser,\n        \n        isLoading: computed(() => store.getters['utils/isLoading']),\n        error: computed(() => store.getters['utils/getError'])\n    }\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Profile.vue?vue&type=style&index=0&id=e32aacbe&scoped=true&lang=scss\""],"sourceRoot":""}