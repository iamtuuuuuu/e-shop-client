{"version":3,"sources":["webpack:///./src/composables/useUsersDetails.js","webpack:///./src/views/Admin/UserDetails.vue","webpack:///./src/views/Admin/UserDetails.vue?380a","webpack:///./src/views/Admin/UserDetails.vue?909b"],"names":["useUsersDetails","store","useStore","success","ref","users","computed","getters","userDetails","fetchAllUsers","dispatch","fetchUserDetails","user","updateUserProfile","password","confirmPassword","commit","message","root","value","updateUserDetails","route","_id","deleteUser","userId","window","confirm","isLoading","error","id","class","for","type","to","name","inputId","label","errors","undefined","email","isAdmin","orders","length","some","order","isPaid","isDelivered","key","dayjs","createdAt","format","Intl","NumberFormat","paidAt","icon","deliveredAt","extend","components","VFormInput","VLoader","VAlert","setup","useOrders","fetchAllOrders","params","render","__scopeId"],"mappings":"4MAGe,SAASA,IACpB,IAAMC,EAAQC,iBAERC,EAAUC,gBAAI,GACdC,EAAQC,gBAAS,kBAAML,EAAMM,QAAQ,kBACrCC,EAAcF,gBAAS,kBAAML,EAAMM,QAAQ,qBAE3CE,EAAgB,kBAAMR,EAAMS,SAAS,kBACrCC,EAAmB,eAACC,EAAD,uDAAQ,UAAR,OAAsBX,EAAMS,SAAS,mBAAoBE,IAE5EC,EAAiB,yDAAG,WAAMD,GAAN,oFACtBA,EAAKE,WAAaF,EAAKG,gBADD,gBAEhBd,EAAMe,OAAO,iBAAkB,CAAEC,QAAS,wCAA0C,CAAEC,MAAM,IAF5E,sCAGMjB,EAAMS,SAAS,oBAAqB,CAAEE,SAH5C,OAGhBT,EAAQgB,MAHQ,kDAAH,sDAKjBC,EAAiB,yDAAG,WAAMR,GAAN,iGAAoCX,EAAMS,SAAS,oBAAqB,CAAEE,OAAMS,MAAOT,EAAKU,MAA5F,gCAAcnB,EAAQgB,MAAtB,mDAAH,sDAEjBI,EAAa,SAAAC,GACXC,OAAOC,QAAP,gDAAwDF,EAAxD,OAAoEvB,EAAMS,SAAS,aAAcc,IAGzG,MAAO,CACHrB,UACAE,QACAG,cAEAC,gBACAE,mBACAE,oBACAO,oBACAG,aAEAI,UAAWrB,gBAAS,kBAAML,EAAMM,QAAQ,sBACxCqB,MAAOtB,gBAAS,kBAAML,EAAMM,QAAQ,wB,kJCnCvCsB,GAAG,eAAeC,MAAM,gC,GACrBA,MAAM,Q,iBACkE,W,EAGxE,eAAiC,QAA3BA,MAAM,cAAa,KAAC,G,GASzBA,MAAM,O,GACFA,MAAM,Y,EACP,eAA6B,MAAzBA,MAAM,QAAO,WAAO,G,iBAEqB,qB,GAmBpCA,MAAM,mB,EAEP,eAA8D,SAAvDC,IAAI,UAAUD,MAAM,oBAAmB,YAAQ,G,EAG1D,eAES,UAFDE,KAAK,SAASF,MAAM,0BAAyB,YAErD,G,GAGHA,MAAM,yB,GACHA,MAAM,Q,iBAAO,W,SAMZA,MAAM,oB,GACAA,MAAM,8B,EAGD,eAAW,UAAP,MAAE,G,EACN,eAA+B,MAA3BA,MAAM,aAAY,QAAI,G,EAC1B,eAAc,UAAV,SAAK,G,EAGT,eAAS,mB,gQA/DrC,eAwGM,MAxGN,EAwGM,CAvGF,eAMK,KANL,EAMK,CALD,eAEc,GAFAG,GAAI,2BAA+BH,MAAM,kB,YAAiB,iBAExE,C,qBACA,E,eAAiC,IACjC,eAAG,EAAAlB,KAAKsB,MAAI,KAGA,EAAAP,W,iBAAhB,eAA6B,YACT,EAAAC,MAAMX,S,iBAA1B,eAEU,W,WADN,iBAAmB,C,8BAAhB,EAAAW,MAAMX,SAAO,O,6BAGpB,eAyFM,MAzFN,EAyFM,CAxFF,eA+BM,MA/BN,EA+BM,CA9BF,EAEe,EAAAd,S,iBAAf,eAEU,G,MAFc6B,KAAK,iB,YAAgB,iBAE7C,C,mCAEA,eAuBO,QAvBA,SAAM,+CAAU,EAAAZ,kBAAkB,EAAAR,QAAI,e,CACzC,eAKE,G,WAJW,EAAAA,KAAKsB,K,qDAAL,EAAAtB,KAAKsB,KAAI,IAClBC,QAAQ,OACRC,MAAM,OACLC,OAAQ,EAAAT,MAAMS,OAAS,EAAAT,MAAMS,OAAOH,UAAOI,G,gCAEhD,eAME,G,WALW,EAAA1B,KAAK2B,M,qDAAL,EAAA3B,KAAK2B,MAAK,IACnBJ,QAAQ,QACRC,MAAM,gBACNN,MAAM,OACLO,OAAQ,EAAAT,MAAMS,OAAS,EAAAT,MAAMS,OAAOE,WAAQD,G,gCAGjD,eAGM,MAHN,EAGM,C,eAFF,eAAoF,SAA7ET,GAAG,UAAUG,KAAK,WAAWF,MAAM,mB,qDAA4B,EAAAlB,KAAK4B,QAAO,K,mBAAZ,EAAA5B,KAAK4B,WAC3E,IAGJ,G,MAKR,eAuDM,MAvDN,EAuDM,CAtDF,eAA2D,KAA3D,EAA2D,C,EAAnC,eAA8B,0BAAtB,EAAAC,OAAOC,QAAM,KAEX,EAAAf,WAA0B,IAAb,EAAAc,OAAOC,Q,iBAItD,eA+CM,MA/CN,EA+CM,CA9CF,eA6CQ,QA7CR,EA6CQ,CA5CJ,eASQ,cARJ,eAOK,WAND,EACA,EACA,EACA,eAAwE,MAAnEZ,MAAK,aAAgB,EAAAW,OAAOE,MAAK,SAAAC,GAAK,OAAIA,EAAMC,YAAU,OAAI,GACnE,eAAkF,MAA7Ef,MAAK,aAAgB,EAAAW,OAAOE,MAAK,SAAAC,GAAK,OAAIA,EAAME,iBAAe,YAAS,GAC7E,MAGR,eAiCQ,e,mBAhCJ,eA+BK,2BA/Be,EAAAL,QAAM,SAAfG,G,wBAAX,eA+BK,MA/BwBG,IAAKH,EAAMtB,K,CACpC,eAAwB,yBAAjBsB,EAAMtB,KAAG,GAChB,eAAmD,yBAA5C,EAAA0B,MAAMJ,EAAMK,WAAWC,OAAM,WACpC,eAOK,6BALOC,KAAKC,aAAY,S,kCAAsK,OAAO,EAAM,aAAU,GAM1N,eAKK,WAJWR,EAAMC,Q,iBAAlB,eAEO,wBADA,EAAAG,MAAMJ,EAAMS,QAAQH,OAAM,a,iBAEjC,eAAqD,G,MAAjCI,KAAM,CAAC,MAAO,cAEtC,eAKK,WAJWV,EAAME,a,iBAAlB,eAEO,wBADA,EAAAE,MAAMJ,EAAMW,aAAaL,OAAM,a,iBAEtC,eAAqD,G,MAAjCI,KAAM,CAAC,MAAO,cAEtC,eAOK,WAND,eAKc,GAJTrB,GAAE,+BAAuCW,EAAMtB,MAChDQ,MAAM,uB,YAEN,iBAAoD,CAApD,eAAoD,GAAhCwB,KAAM,CAAC,MAAO,qB,wDA7C1D,eAEU,G,MAFDtB,KAAK,c,YACV,iBAAe,C,8BAAZ,EAAApB,KAAKsB,MAAO,8BACnB,O,0IAiEZ,IAAMsB,OAAO,KAEE,OACXtB,KAAM,eACNuB,WAAY,CACRC,aAAA,KACAC,QAAS,gBAAqB,kBAAM,qDACpCC,OAAQ,gBAAqB,kBAAM,uDAEvCC,MAPW,WAQP,IAAMxC,EAAQ,iBADV,EAEoF,OAAArB,EAAA,QAAhFG,EAFJ,EAEIA,QAASK,EAFb,EAEaA,YAAaG,EAF1B,EAE0BA,iBAAkBS,EAF5C,EAE4CA,kBAAmBO,EAF/D,EAE+DA,UAAWC,EAF1E,EAE0EA,MAF1E,EAG+B,OAAAkC,EAAA,QAA3BrB,EAHJ,EAGIA,OAAQsB,EAHZ,EAGYA,eAEhBpD,EAAiBU,EAAM2C,OAAOnC,IAC9BkC,EAAe1C,EAAM2C,OAAOnC,IAE5B,IAAMjB,EAAO,eAAIJ,EAAYW,OAE7B,MAAO,CACHhB,UACAS,OACA6B,SACArB,oBACA4B,MAAA,IACArB,YACAC,W,UC3IZ,EAAOqC,OAASA,EAChB,EAAOC,UAAY,kBAEJ,gB,yDCRf","file":"js/admin-user-details.35c2e2e9.js","sourcesContent":["import { computed, ref } from 'vue'\nimport { useStore } from 'vuex'\n\nexport default function useUsersDetails() {\n    const store = useStore()\n\n    const success = ref(false)\n    const users = computed(() => store.getters['getAllUsers'])\n    const userDetails = computed(() => store.getters['getUserDetails'])\n\n    const fetchAllUsers = () => store.dispatch('fetchAllUsers')\n    const fetchUserDetails = (user = 'profile') => store.dispatch('fetchUserDetails', user)\n\n    const updateUserProfile = async user => {\n        user.password !== user.confirmPassword\n            ? store.commit('utils/setError', { message: 'The password confirmation must match' }, { root: true })\n            : success.value = await store.dispatch('updateUserDetails', { user })\n    }\n    const updateUserDetails = async user => success.value = await store.dispatch('updateUserDetails', { user, route: user._id })\n\n    const deleteUser = userId => {\n        if (window.confirm(`Do you really want to remove the user ${userId}?`)) store.dispatch('deleteUser', userId)\n    }\n\n    return {\n        success,\n        users,\n        userDetails,\n        \n        fetchAllUsers,\n        fetchUserDetails,\n        updateUserProfile,\n        updateUserDetails,\n        deleteUser,\n        \n        isLoading: computed(() => store.getters['utils/isLoading']),\n        error: computed(() => store.getters['utils/getError'])\n    }\n}","<template>\n<div id=\"user-details\" class=\"container-lg container-fluid\">\n    <h2 class=\"mb-4\">\n        <router-link :to=\"{ name: 'admin.users.index' }\" class=\"text-secondary\">\n            Users\n        </router-link>\n        <span class=\"text-muted\">/</span>\n        {{ user.name }}\n    </h2>\n\n    <v-loader v-if=\"isLoading\" />\n    <v-alert v-else-if=\"error.message\">\n        {{ error.message }}\n    </v-alert>\n\n    <div class=\"row\">\n        <div class=\"col-lg-3\">\n            <h3 class=\"mb-3\">Details</h3>\n\n            <v-alert v-if=\"success\" type=\"alert-success\">\n                Profile updated\n            </v-alert>\n\n            <form @submit.prevent=\"updateUserDetails(user)\">\n                <v-form-input\n                    v-model=\"user.name\"\n                    inputId=\"name\"\n                    label=\"Name\"\n                    :errors=\"error.errors ? error.errors.name : undefined\"\n                />\n                <v-form-input\n                    v-model=\"user.email\"\n                    inputId=\"email\"\n                    label=\"Email Address\"\n                    class=\"mb-2\"\n                    :errors=\"error.errors ? error.errors.email : undefined\"\n                />\n\n                <div class=\"form-check mb-3\">\n                    <input id=\"isAdmin\" type=\"checkbox\" class=\"form-check-input\" v-model=\"user.isAdmin\">\n                    <label for=\"isAdmin\" class=\"form-check-label\">Is Admin</label>\n                </div>\n                \n                <button type=\"submit\" class=\"btn btn-dark btn-block\">\n                    Update\n                </button>\n            </form>\n        </div>\n        <div class=\"col-lg-9 mt-lg-0 mt-4\">\n            <h3 class=\"mb-3\">Orders <sup>{{ orders.length }}</sup></h3>\n\n            <v-alert type=\"alert-info\" v-if=\"!isLoading && orders.length === 0\">\n                {{ user.name }} don't have any order yet.\n            </v-alert>\n            \n            <div class=\"table-responsive\" v-else>\n                <table class=\"table table-hover table-sm\">\n                    <thead>\n                        <tr>\n                            <th>Id</th>\n                            <th class=\"min-width\">Date</th>\n                            <th>Total</th>\n                            <th :class=\"{'min-width': orders.some(order => order.isPaid)}\">Paid</th>\n                            <th :class=\"{'min-width': orders.some(order => order.isDelivered)}\">Delivered</th>\n                            <th></th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr v-for=\"order in orders\" :key=\"order._id\">\n                            <td>{{ order._id }}</td>\n                            <td>{{ dayjs(order.createdAt).format('lll') }}</td>\n                            <td>\n                                {{\n                                    new Intl.NumberFormat('en-US', {\n                                        style: 'currency',\n                                        currency: 'USD'\n                                    }).format(order.totalPrice)\n                                }}\n                            </td>\n                            <td>\n                                <span v-if=\"order.isPaid\">\n                                    {{ dayjs(order.paidAt).format('lll') }}\n                                </span>\n                                <font-awesome-icon :icon=\"['fas', 'times']\" v-else />\n                            </td>\n                            <td>\n                                <span v-if=\"order.isDelivered\">\n                                    {{ dayjs(order.deliveredAt).format('lll') }}\n                                </span>\n                                <font-awesome-icon :icon=\"['fas', 'times']\" v-else />\n                            </td>\n                            <td>\n                                <router-link\n                                    :to=\"{ name: 'orders.show', params: { id: order._id }}\"\n                                    class=\"btn btn-link btn-sm\"\n                                >\n                                    <font-awesome-icon :icon=\"['fas', 'info-circle']\" />\n                                </router-link>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n</template>\n\n<script>\nimport { defineAsyncComponent, ref } from 'vue'\nimport { useRoute } from 'vue-router'\nimport VFormInput from '@/components/VFormInput'\n\nimport useUsersDetails from '@/composables/useUsersDetails'\nimport useOrders from '@/composables/useOrders'\n\nimport dayjs from 'dayjs'\nimport localizedFormat from 'dayjs/plugin/localizedFormat'\ndayjs.extend(localizedFormat)\n\nexport default {\n    name: 'User Details',\n    components: {\n        VFormInput,\n        VLoader: defineAsyncComponent(() => import(/* webpackChunkName: \"loader-component\" */ '@/components/utils/VLoader')),\n        VAlert: defineAsyncComponent(() => import(/* webpackChunkName: \"message-component\" */ '@/components/utils/VAlert'))\n    },\n    setup() {\n        const route = useRoute()\n        const { success, userDetails, fetchUserDetails, updateUserDetails, isLoading, error } = useUsersDetails()\n        const { orders, fetchAllOrders } = useOrders();\n\n        fetchUserDetails(route.params.id)\n        fetchAllOrders(route.params.id)\n\n        const user = ref(userDetails.value)\n\n        return {\n            success,\n            user,\n            orders,\n            updateUserDetails,\n            dayjs,\n            isLoading,\n            error\n        }\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.row > div {\n    h3 sup {\n        font-size: 45%;\n        vertical-align: top;\n        top: .3em;\n        font-weight: 900;\n    }\n}\n\ntable {\n    thead tr th,\n    tbody tr td {\n        text-align: center;\n        vertical-align: middle;\n\n        svg {\n            &.fa-times { color: var(--danger) }\n        }\n    }\n}\n\n@media (max-width: 991px) {\n    table thead tr th.min-width {\n        min-width: 11.5rem\n    }\n}\n\n@media (max-width: 767px) {\n    #user-details {\n        > .row {\n            margin: 0;\n        \n            > div { padding: 0; }\n        }\n    }\n}\n</style>","import { render } from \"./UserDetails.vue?vue&type=template&id=0157d2c0&scoped=true\"\nimport script from \"./UserDetails.vue?vue&type=script&lang=js\"\nexport * from \"./UserDetails.vue?vue&type=script&lang=js\"\n\nimport \"./UserDetails.vue?vue&type=style&index=0&id=0157d2c0&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-0157d2c0\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UserDetails.vue?vue&type=style&index=0&id=0157d2c0&scoped=true&lang=scss\""],"sourceRoot":""}